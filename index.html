<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>VoiceStore Premium Dashboard</title>
Â  Â Â 
Â  Â  <!-- Tailwind CSS -->
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script>
Â  Â  Â  tailwind.config = {
Â  Â  Â  Â  darkMode: 'class',
Â  Â  Â  Â  theme: {
Â  Â  Â  Â  Â  extend: {
Â  Â  Â  Â  Â  Â  fontFamily: {
Â  Â  Â  Â  Â  Â  Â  sans: ['Inter', 'system-ui', 'sans-serif'],
Â  Â  Â  Â  Â  Â  Â  mono: ['JetBrains Mono', 'monospace'],
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  colors: {
Â  Â  Â  Â  Â  Â  Â  brand: {
Â  Â  Â  Â  Â  Â  Â  Â  primary: '#f59e0b',
Â  Â  Â  Â  Â  Â  Â  Â  primaryHover: '#d97706',
Â  Â  Â  Â  Â  Â  Â  Â  darkBg: '#020617',
Â  Â  Â  Â  Â  Â  Â  Â  darkCard: '#0f172a',
Â  Â  Â  Â  Â  Â  Â  Â  lightBg: '#f0f4f8',
Â  Â  Â  Â  Â  Â  Â  Â  lightCard: '#ffffff'
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  animation: {
Â  Â  Â  Â  Â  Â  Â  'fade-in-up': 'fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
Â  Â  Â  Â  Â  Â  Â  'pop-in': 'popIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
Â  Â  Â  Â  Â  Â  Â  'super-glow': 'superGlow 2s infinite alternate',
Â  Â  Â  Â  Â  Â  Â  'pulse-border': 'pulseBorder 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
Â  Â  Â  Â  Â  Â  Â  'float-slow': 'float 20s ease-in-out infinite',
Â  Â  Â  Â  Â  Â  Â  'float-fast': 'float 15s ease-in-out infinite reverse'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  keyframes: {
Â  Â  Â  Â  Â  Â  Â  fadeInUp: {
Â  Â  Â  Â  Â  Â  Â  Â  '0%': { opacity: '0', transform: 'translateY(20px)' },
Â  Â  Â  Â  Â  Â  Â  Â  '100%': { opacity: '1', transform: 'translateY(0)' },
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  popIn: {
Â  Â  Â  Â  Â  Â  Â  Â  '0%': { opacity: '0', transform: 'scale(0.9) translateY(10px)' },
Â  Â  Â  Â  Â  Â  Â  Â  '100%': { opacity: '1', transform: 'scale(1) translateY(0)' },
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  superGlow: {
Â  Â  Â  Â  Â  Â  Â  Â  '0%': { boxShadow: '0 0 15px rgba(245, 158, 11, 0.2), inset 0 0 10px rgba(245, 158, 11, 0.1)' },
Â  Â  Â  Â  Â  Â  Â  Â  '100%': { boxShadow: '0 0 35px rgba(245, 158, 11, 0.7), inset 0 0 25px rgba(245, 158, 11, 0.4)' }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  pulseBorder: {
Â  Â  Â  Â  Â  Â  Â  Â  '0%, 100%': { borderColor: 'rgba(245, 158, 11, 0.2)' },
Â  Â  Â  Â  Â  Â  Â  Â  '50%': { borderColor: 'rgba(245, 158, 11, 0.8)' }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  float: {
Â  Â  Â  Â  Â  Â  Â  Â  '0%, 100%': { transform: 'translateY(0) translateX(0)' },
Â  Â  Â  Â  Â  Â  Â  Â  '50%': { transform: 'translateY(-30px) translateX(20px)' }
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  </script>
Â  Â Â 
Â  Â  <!-- Google Fonts -->
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
Â  Â Â 
Â  Â  <script async src="https://unpkg.com/es-module-shims@1.10.0/dist/es-module-shims.js"></script>

Â  Â  <!-- Import Maps for React and Lucide (Fixed for iPhone) -->
Â  Â  <script type="importmap">
Â  Â  Â  {
Â  Â  Â  Â  "imports": {
Â  Â  Â  Â  Â  "react": "https://esm.sh/react@18.2.0?target=es2020",
Â  Â  Â  Â  Â  "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?target=es2020",
Â  Â  Â  Â  Â  "lucide-react": "https://esm.sh/lucide-react@0.344.0?external=react&target=es2020"
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  </script>
Â  Â Â 
Â  Â  <!-- Babel & Libraries -->
Â  Â  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/otpauth/9.2.2/otpauth.umd.min.js"></script>
Â  Â  <script src="https://checkout.flutterwave.com/v3.js"></script>

Â  Â  <style>
Â  Â  Â  Â  .scrollbar-hide::-webkit-scrollbar { display: none; }
Â  Â  Â  Â  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  transition: background-color 0.5s ease, color 0.5s ease;
Â  Â  Â  Â  Â  Â  -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  Â  Â  scroll-behavior: smooth;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  input, textarea, pre, select {
Â  Â  Â  Â  Â  Â  -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-animate {
Â  Â  Â  Â  Â  Â  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease, filter 0.2s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-animate:active {
Â  Â  Â  Â  Â  Â  transform: translateY(2px) scale(0.98);
Â  Â  Â  Â  Â  Â  filter: brightness(0.9);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ðŸš€ EXTREME VIBRATE & ASSEMBLE ANIMATION (INTRO) ðŸš€ */
Â  Â  Â  Â  .scatter-letter {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  animation: extremeVibrateAssemble 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  will-change: transform, opacity, filter;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes extremeVibrateAssemble {
Â  Â  Â  Â  Â  Â  0% { opacity: 0; transform: translate(var(--startX), var(--startY)) rotate(var(--startR)) scale(4); filter: blur(15px); }
Â  Â  Â  Â  Â  Â  15% { opacity: 1; transform: translate(calc(var(--startX) * 0.7), calc(var(--startY) * 0.7)) rotate(calc(var(--startR) * 0.7)) scale(3); filter: blur(5px); }
Â  Â  Â  Â  Â  Â  30% { transform: translate(calc(var(--startX) * 0.4 + 25px), calc(var(--startY) * 0.4 - 25px)) rotate(calc(var(--startR) * 0.4 + 20deg)) scale(2.2); filter: blur(0); }
Â  Â  Â  Â  Â  Â  45% { transform: translate(calc(var(--startX) * 0.2 - 25px), calc(var(--startY) * 0.2 + 25px)) rotate(calc(var(--startR) * 0.2 - 20deg)) scale(1.8); }
Â  Â  Â  Â  Â  Â  60% { transform: translate(15px, -15px) rotate(12deg) scale(1.4); }
Â  Â  Â  Â  Â  Â  70% { transform: translate(-12px, 12px) rotate(-10deg) scale(1.2); }
Â  Â  Â  Â  Â  Â  80% { transform: translate(8px, -8px) rotate(6deg) scale(1.1); }
Â  Â  Â  Â  Â  Â  90% { transform: translate(-4px, 4px) rotate(-3deg) scale(1.02); }
Â  Â  Â  Â  Â  Â  100% { opacity: 1; transform: translate(0, 0) rotate(0) scale(1); filter: blur(0); }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Premium Custom Scrollbar */
Â  Â  Â  Â  .custom-scrollbar::-webkit-scrollbar { width: 6px; }
Â  Â  Â  Â  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
Â  Â  Â  Â  .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(245, 158, 11, 0.4); border-radius: 10px; }
Â  Â  Â  Â  .custom-scrollbar::-webkit-scrollbar-thumb:hover { background-color: rgba(245, 158, 11, 0.8); }
Â  Â  </style>
</head>
<body class="antialiased bg-[#0f172a] text-white transition-colors duration-500">
Â  Â  <div id="root"></div>

Â  Â  <script type="text/babel" data-type="module">
Â  Â  Â  Â  import React, { useState, useEffect, useRef } from 'react';
Â  Â  Â  Â  import { createRoot } from 'react-dom/client';

Â  Â  Â  Â  import {Â 
Â  Â  Â  Â  Â  Â  ShoppingCart, LogOut, Package, Users, DollarSign, Settings, Plus, Trash2, CheckCircle,Â 
Â  Â  Â  Â  Â  Â  X, Wallet, CreditCard, Clock, Copy, ArrowRight, Bell, User as UserIcon,Â 
Â  Â  Â  Â  Â  Â  Activity, BarChart, Eye, Lock, Search, Megaphone, Award, Zap, Headset,Â 
Â  Â  Â  Â  Â  Â  Star, AlertTriangle, Smartphone, Mail, ShieldAlert, Sun, Moon, HelpCircle, History, TrendingUp, Sparkles, Building, Edit, RefreshCw, ChevronDown, StopCircle
Â  Â  Â  Â  } from 'lucide-react';

Â  Â  Â  Â  // Firebase Imports
Â  Â  Â  Â  import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
Â  Â  Â  Â  import { getAuth, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, sendEmailVerification, sendPasswordResetEmail, updateEmail, updatePassword } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
Â  Â  Â  Â  import { getFirestore, collection, doc, setDoc, getDoc, onSnapshot, updateDoc } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';
Â  Â  Â  Â Â 
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  apiKey: "AIzaSyAzHV1ZFm30K5xUzkAFYn4wuZUdxYdtgzo",
Â  Â  Â  Â  Â  authDomain: "profit-pulse-ca8b1.firebaseapp.com",
Â  Â  Â  Â  Â  projectId: "profit-pulse-ca8b1",
Â  Â  Â  Â  Â  storageBucket: "profit-pulse-ca8b1.firebasestorage.app",
Â  Â  Â  Â  Â  messagingSenderId: "422601280147",
Â  Â  Â  Â  Â  appId: "1:422601280147:web:904ade1f967d4515179b66"
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = getAuth(app);
Â  Â  Â  Â  const db = getFirestore(app);
Â  Â  Â  Â  const appId = typeof window.__app_id !== 'undefined' ? window.__app_id : 'voice-store-real';

Â  Â  Â  Â  const PRODUCT_CATEGORIES = [
Â  Â  Â  Â  Â  { id: 'new', name: 'New Google Voice', description: 'Fresh account with recovery email. Ideal for personal use.', price: 5.00, icon: Package, color: 'text-violet-500 dark:text-violet-400' },
Â  Â  Â  Â  Â  { id: 'old', name: 'Old Google Voice', description: 'Aged and highly trusted account (2012-2020).', price: 15.00, icon: Sparkles, color: 'text-rose-500 dark:text-rose-400' },
Â  Â  Â  Â  Â  { id: 'textplus', name: 'TextPlus Account', description: 'Verified USA TextPlus account for unlimited texting.', price: 2.50, icon: Smartphone, color: 'text-cyan-500 dark:text-cyan-400' },
Â  Â  Â  Â  Â  { id: 'gv_bulk', name: 'Bulk Google Voice (10x)', description: 'Wholesale package of 10 fresh Google Voice accounts.', price: 45.00, icon: Users, color: 'text-yellow-500 dark:text-yellow-400' }
Â  Â  Â  Â  ];

Â  Â  Â  Â  const CUSTOMER_TABS = [
Â  Â  Â  Â  Â  Â  { id: 'sms', label: 'Live SMS', icon: Smartphone },
Â  Â  Â  Â  Â  Â  { id: 'store', label: 'Marketplace', icon: ShoppingCart },
Â  Â  Â  Â  Â  Â  { id: 'add_funds', label: 'Deposit', icon: Wallet },
Â  Â  Â  Â  Â  Â  { id: 'my_accounts', label: 'Vault', icon: Package },
Â  Â  Â  Â  Â  Â  { id: 'profile', label: 'Profile', icon: UserIcon }Â 
Â  Â  Â  Â  ];

Â  Â  Â  Â  const ADMIN_TABS = [
Â  Â  Â  Â  Â  Â  { id: 'inventory', label: 'Inventory', icon: Package },
Â  Â  Â  Â  Â  Â  { id: 'deposits', label: 'Deposits', icon: CreditCard },
Â  Â  Â  Â  Â  Â  { id: 'users', label: 'Customers', icon: Users },
Â  Â  Â  Â  Â  Â  { id: 'support', label: 'Support', icon: Headset },
Â  Â  Â  Â  Â  Â  { id: 'analytics', label: 'Analytics', icon: BarChart },
Â  Â  Â  Â  Â  Â  { id: 'settings', label: 'Settings', icon: Settings }
Â  Â  Â  Â  ];

Â  Â  Â  Â  // ðŸš€ EXTREME CLEAR GLASS UI (1px BLUR, NO OBSTRUCTION) ðŸš€
Â  Â  Â  Â  const uiCard = "bg-white/10 dark:bg-black/10 border border-white/30 dark:border-white/10 shadow-[0_8px_32px_0_rgba(31,38,135,0.07)] dark:shadow-[0_8px_32px_0_rgba(0,0,0,0.3)] backdrop-blur-[1px] rounded-3xl relative overflow-hidden transition-all duration-300 w-full hover:bg-white/20 dark:hover:bg-black/20";
Â  Â  Â  Â  const uiInput = "w-full bg-white/10 dark:bg-black/20 backdrop-blur-[1px] border border-white/30 dark:border-white/10 rounded-xl px-4 py-3.5 text-sm text-slate-900 dark:text-slate-200 placeholder-slate-500 dark:placeholder-slate-400 outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all font-medium shadow-inner";
Â  Â  Â  Â  const uiBtnPrimary = "btn-animate w-full bg-gradient-to-r from-violet-500/70 via-cyan-500/70 to-violet-600/70 hover:opacity-100 text-white font-bold py-4 px-6 rounded-xl shadow-[0_4px_20px_rgba(139,92,246,0.3)] backdrop-blur-[1px] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all border border-white/30 dark:border-white/10";
Â  Â  Â  Â  const uiBtnSecondary = "btn-animate w-full bg-white/10 dark:bg-white/5 hover:bg-white/20 dark:hover:bg-white/10 backdrop-blur-[1px] border border-white/30 dark:border-white/10 text-slate-800 dark:text-white font-bold py-3.5 px-6 rounded-xl shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all";
Â  Â  Â  Â  const uiBtnAction = "btn-animate bg-white/10 dark:bg-white/5 hover:bg-white/20 dark:hover:bg-white/10 backdrop-blur-[1px] border border-white/30 dark:border-white/10 text-slate-800 dark:text-white font-semibold py-2 px-4 rounded-lg text-xs flex items-center gap-1.5 transition-all disabled:opacity-50 shadow-sm";
Â  Â  Â  Â  const uiInnerPanel = "bg-white/5 dark:bg-black/10 border border-white/20 dark:border-white/5 backdrop-blur-[1px] rounded-2xl p-5 w-full transition-all hover:bg-white/10 dark:hover:bg-white/10";

Â  Â  Â  Â  const TIERS = [
Â  Â  Â  Â  Â  Â  { threshold: 0, name: 'Bronze', next: 20, color: 'text-cyan-500 dark:text-cyan-400', icon: Award },
Â  Â  Â  Â  Â  Â  { threshold: 20, name: 'Silver', next: 50, color: 'text-slate-500 dark:text-slate-300', icon: Award },
Â  Â  Â  Â  Â  Â  { threshold: 50, name: 'Gold', next: 100, color: 'text-yellow-500 dark:text-yellow-400', icon: Award },
Â  Â  Â  Â  Â  Â  { threshold: 100, name: 'VIP Status', next: 100, color: 'text-violet-500 dark:text-violet-400', icon: Zap }
Â  Â  Â  Â  ];

Â  Â  Â  Â  const getTier = (spent) => {
Â  Â  Â  Â  Â  if(typeof spent !== 'number' || isNaN(spent)) return TIERS[0];
Â  Â  Â  Â  Â  if(spent >= 100) return TIERS[3];
Â  Â  Â  Â  Â  if(spent >= 50) return TIERS[2];
Â  Â  Â  Â  Â  if(spent >= 20) return TIERS[1];
Â  Â  Â  Â  Â  return TIERS[0];
Â  Â  Â  Â  };

Â  Â  Â  Â  // ðŸš€ OPTIMIZED BACKGROUND (ZERO OVERHEATING) ðŸš€
Â  Â  Â  Â  const PremiumBackground = () => (
Â  Â  Â  Â  Â  <div className="fixed inset-0 z-[-1] pointer-events-none bg-slate-100 dark:bg-[#070b14] transition-colors duration-500 overflow-hidden">
Â  Â  Â  Â  Â  Â  Â <div className="absolute top-[-20%] left-[-10%] w-[100vw] h-[100vw] sm:w-[800px] sm:h-[800px] opacity-60 dark:opacity-30" style={{background: 'radial-gradient(circle, rgba(139,92,246,0.3) 0%, rgba(139,92,246,0) 70%)'}}></div>
Â  Â  Â  Â  Â  Â  Â <div className="absolute bottom-[-10%] right-[-10%] w-[90vw] h-[90vw] sm:w-[600px] sm:h-[600px] opacity-60 dark:opacity-20" style={{background: 'radial-gradient(circle, rgba(6,182,212,0.3) 0%, rgba(6,182,212,0) 70%)'}}></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  );

Â  Â  Â  Â  const SplashScreen = () => {
Â  Â  Â  Â  Â  const text = "Voice Store".split("");
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  // à¦†à¦‡à¦«à§‹à¦¨ à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦¡à¦¾à¦‡à¦¨à¦¾à¦®à¦¿à¦• à¦¸à§à¦Ÿà¦¾à¦‡à¦² à¦œà§‡à¦¨à¦¾à¦°à§‡à¦Ÿà¦° (iPhone Safari Fix)
Â  Â  Â  Â  Â  const animations = text.map((char, i) => {
Â  Â  Â  Â  Â  Â  Â  if (char === " ") return null;
Â  Â  Â  Â  Â  Â  Â  const side = Math.floor(Math.random() * 4);
Â  Â  Â  Â  Â  Â  Â  let startX, startY;
Â  Â  Â  Â  Â  Â  Â  if (side === 0) { startX = (Math.random() * 200 - 100) + 'vw'; startY = '-150vh'; }
Â  Â  Â  Â  Â  Â  Â  else if (side === 1) { startX = '150vw'; startY = (Math.random() * 200 - 100) + 'vh'; }
Â  Â  Â  Â  Â  Â  Â  else if (side === 2) { startX = (Math.random() * 200 - 100) + 'vw'; startY = '150vh'; }
Â  Â  Â  Â  Â  Â  Â  else { startX = '-150vw'; startY = (Math.random() * 200 - 100) + 'vh'; }
Â  Â  Â  Â  Â  Â  Â  const startR = (Math.random() * 1440 - 720) + 'deg';
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  @keyframes iosVibrateAssemble${i} {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  0% { opacity: 0; transform: translate(${startX}, ${startY}) rotate(${startR}) scale(4); filter: blur(10px); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  15% { opacity: 1; transform: translate(calc(${startX} * 0.7), calc(${startY} * 0.7)) rotate(calc(${startR} * 0.7)) scale(3); filter: blur(5px); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  30% { transform: translate(calc(${startX} * 0.4 + 20px), calc(${startY} * 0.4 - 20px)) rotate(calc(${startR} * 0.4 + 20deg)) scale(2.2); filter: blur(0); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  45% { transform: translate(calc(${startX} * 0.2 - 20px), calc(${startY} * 0.2 + 20px)) rotate(calc(${startR} * 0.2 - 20deg)) scale(1.8); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  60% { transform: translate(15px, -15px) rotate(12deg) scale(1.4); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  70% { transform: translate(-12px, 12px) rotate(-10deg) scale(1.2); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  80% { transform: translate(8px, -8px) rotate(6deg) scale(1.1); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  90% { transform: translate(-4px, 4px) rotate(-3deg) scale(1.02); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  100% { opacity: 1; transform: translate(0, 0) rotate(0) scale(1); filter: blur(0); }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  .char-anim-${i} {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  animation: iosVibrateAssemble${i} 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  animation-delay: ${i * 0.08}s;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  will-change: transform, opacity, filter;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#0f172a] transition-opacity duration-500 w-full h-full p-4 overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â <style dangerouslySetInnerHTML={{ __html: animations.filter(Boolean).join('\n') }} />
Â  Â  Â  Â  Â  Â  Â  Â <div className="relative z-10 flex flex-col items-center w-full px-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-5xl sm:text-8xl md:text-9xl font-black tracking-tighter mb-8 flex justify-center flex-wrap w-full" style={{ lineHeight: '1.2' }}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {text.map((char, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (char === " ") return <span key={i} className="w-3 sm:w-6"></span>;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span key={i} className={`char-anim-${i}`} style={{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: 'linear-gradient(to right bottom, #c084fc, #22d3ee)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WebkitBackgroundClip: 'text',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WebkitTextFillColor: 'transparent',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  filter: 'drop-shadow(0px 0px 15px rgba(139,92,246,0.6))'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {char}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 font-bold text-[10px] sm:text-sm uppercase tracking-[0.4em] sm:tracking-[0.6em] animate-fade-in-up" style={{ animationDelay: '1.8s', opacity: 0, animationFillMode: 'forwards' }}>Premium Workspace</p>
Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  function App() {
Â  Â  Â  Â  Â  const [showSplash, setShowSplash] = useState(true);
Â  Â  Â  Â  Â  const [user, setUser] = useState(null);Â 
Â  Â  Â  Â  Â  const [activeTab, setActiveTab] = useState('sms');
Â  Â  Â  Â  Â  const [isDarkMode, setIsDarkMode] = useState(false);
Â  Â  Â  Â  Â  const [usersDB, setUsersDB] = useState({});
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [inventory, setInventory] = useState({ new: [], old: [], textplus: [], gv_bulk: [] });
Â  Â  Â  Â  Â  const [allOrders, setAllOrders] = useState([]);
Â  Â  Â  Â  Â  const [deposits, setDeposits] = useState([]);
Â  Â  Â  Â  Â  const [purchases, setPurchases] = useState([]);
Â  Â  Â  Â  Â  const [tickets, setTickets] = useState([]);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [promoSettings, setPromoSettings] = useState({ code: '', discount: 0, isActive: false });
Â  Â  Â  Â  Â  const [globalNotice, setGlobalNotice] = useState('');
Â  Â  Â  Â  Â  const [featureSettings, setFeatureSettings] = useState({ dailyReward: false, referral: false });
Â  Â  Â  Â  Â  const [bankSettings, setBankSettings] = useState({ nairaRate: 1500, flutterwaveKey: '', flutterwaveActive: false });
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [smsSettings, setSmsSettings] = useState({ active: true, markup: 1.00 });
Â  Â  Â  Â  Â  const [categories, setCategories] = useState(PRODUCT_CATEGORIES);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [cart, setCart] = useState([]);
Â  Â  Â  Â  Â  const [showCart, setShowCart] = useState(false);
Â  Â  Â  Â  Â  const [showNotifications, setShowNotifications] = useState(false);
Â  Â  Â  Â  Â  const [notifications, setNotifications] = useState([]);
Â  Â  Â  Â  Â  const [toastData, setToastData] = useState({ show: false, msg: '', id: 0 });

Â  Â  Â  Â  Â  const [authMethod, setAuthMethod] = useState('login');
Â  Â  Â  Â  Â  const [authError, setAuthError] = useState('');
Â  Â  Â  Â  Â  const [authSuccessMsg, setAuthSuccessMsg] = useState('');
Â  Â  Â  Â  Â  const [emailInput, setEmailInput] = useState('');
Â  Â  Â  Â  Â  const [passwordInput, setPasswordInput] = useState('');
Â  Â  Â  Â  Â  const [isLoading, setIsLoading] = useState(false);

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  if (isDarkMode) document.documentElement.classList.add('dark');
Â  Â  Â  Â  Â  Â  Â  else document.documentElement.classList.remove('dark');
Â  Â  Â  Â  Â  }, [isDarkMode]);

Â  Â  Â  Â  Â  useEffect(() => { setTimeout(() => setShowSplash(false), 3500); }, []);

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {
Â  Â  Â  Â  Â  Â  Â  if (firebaseUser && firebaseUser.email) {
Â  Â  Â  Â  Â  Â  Â  Â  Â let currentAdminEmail = 'mdmunnachowdhury0003817@gmail.com';
Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const adminDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'AdminConfig');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const adminDoc = await getDoc(adminDocRef);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (adminDoc.exists()) currentAdminEmail = adminDoc.data().adminEmail || currentAdminEmail;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â else await setDoc(adminDocRef, { adminEmail: currentAdminEmail }, { merge: true });
Â  Â  Â  Â  Â  Â  Â  Â  Â } catch (err) {}

Â  Â  Â  Â  Â  Â  Â  Â  Â if (firebaseUser.email.toLowerCase() === currentAdminEmail.toLowerCase()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setUser({ email: firebaseUser.email, role: 'admin' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveTab('inventory');
Â  Â  Â  Â  Â  Â  Â  Â  Â } else if (firebaseUser.emailVerified || true) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setUser({ email: firebaseUser.email, role: 'customer' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveTab('sms');
Â  Â  Â  Â  Â  Â  Â  Â  Â } else { setUser(null); }
Â  Â  Â  Â  Â  Â  Â  } else { setUser(null); }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  return () => unsubscribe();
Â  Â  Â  Â  Â  }, []);

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  if (!user) return;
Â  Â  Â  Â  Â  Â  const errLog = (e) => { if (e.code !== 'permission-denied') console.error(e); };
Â  Â  Â  Â  Â  Â  const unsubs = [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Inventory', 'Stock'), (snap) => { if (snap.exists()) setInventory(snap.data()); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'PromoCode'), (snap) => { if (snap.exists()) setPromoSettings(snap.data()); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Notice'), (snap) => { if (snap.exists()) setGlobalNotice(snap.data().text); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Features'), (snap) => { if (snap.exists()) setFeatureSettings(snap.data()); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Bank'), (snap) => { if (snap.exists()) setBankSettings(snap.data()); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'SMS'), (snap) => { if (snap.exists()) setSmsSettings(snap.data()); }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Products'), (snap) => { if (snap.exists() && snap.data().list) { const fetchedProducts = snap.data().list; const mergedCategories = fetchedProducts.map(fetchedItem => { const originalItem = PRODUCT_CATEGORIES.find(p => p.id === fetchedItem.id); return { ...fetchedItem, icon: originalItem ? originalItem.icon : Package }; }); setCategories(mergedCategories); } }, errLog));

Â  Â  Â  Â  Â  Â  if (user.role === 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'Store_Users'), (snap) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const u = {}; snap.forEach(d => u[d.id] = d.data()); setUsersDB(u);
Â  Â  Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', user.email), (docSnap) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (docSnap.exists()) setUsersDB(prev => ({...prev, [user.email]: docSnap.data()}));
Â  Â  Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'Store_Orders'), (snap) => {
Â  Â  Â  Â  Â  Â  Â  const o = []; snap.forEach(d => o.push({ id: d.id, ...d.data() })); setAllOrders(o.sort((a,b) => new Date(b.date) - new Date(a.date)));
Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'Store_Deposits'), (snap) => {
Â  Â  Â  Â  Â  Â  Â  const dep = []; snap.forEach(d => dep.push({ id: d.id, ...d.data() })); setDeposits(dep.sort((a,b) => new Date(b.date) - new Date(a.date)));
Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'Store_Purchases'), (snap) => {
Â  Â  Â  Â  Â  Â  Â  const p = []; snap.forEach(d => p.push({ id: d.id, ...d.data() })); setPurchases(p.sort((a,b) => new Date(b.date) - new Date(a.date)));
Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â  unsubs.push(onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'Store_Tickets'), (snap) => {
Â  Â  Â  Â  Â  Â  Â  const t = []; snap.forEach(d => t.push({ id: d.id, ...d.data() })); setTickets(t.sort((a,b) => new Date(b.date) - new Date(a.date)));
Â  Â  Â  Â  Â  Â  }, errLog));
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return () => unsubs.forEach(unsub => unsub());
Â  Â  Â  Â  Â  }, [user]);

Â  Â  Â  Â  Â  const finalizeLogin = async (identifier, role, password = '') => {
Â  Â  Â  Â  Â  Â  if (role === 'admin') return;Â 
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  const userRef = doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', identifier);
Â  Â  Â  Â  Â  Â  Â  const snap = await getDoc(userRef);
Â  Â  Â  Â  Â  Â  Â  if (!snap.exists()) await setDoc(userRef, { password: password, balance: 0, totalSpent: 0, joined: new Date().toISOString(), lastBonusDate: '' });
Â  Â  Â  Â  Â  Â  Â  else if (password !== '') await updateDoc(userRef, { password: password });
Â  Â  Â  Â  Â  Â  } catch (err) {}
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleAuthSubmit = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault(); setAuthError(''); setAuthSuccessMsg(''); setIsLoading(true);
Â  Â  Â  Â  Â  Â  let email = emailInput.trim(); let pwd = passwordInput.trim();
Â  Â  Â  Â  Â  Â  if (!email || !pwd) { setAuthError('Fill in all fields.'); setIsLoading(false); return; }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (authMethod === 'admin') {
Â  Â  Â  Â  Â  Â  Â  const adminDocRef = doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'AdminConfig');
Â  Â  Â  Â  Â  Â  Â  let currentAdminEmail = 'mdmunnachowdhury0003817@gmail.com';Â 
Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const adminDoc = await getDoc(adminDocRef);
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (adminDoc.exists()) currentAdminEmail = adminDoc.data().adminEmail || currentAdminEmail;
Â  Â  Â  Â  Â  Â  Â  } catch (e) {}

Â  Â  Â  Â  Â  Â  Â  if (email.toLowerCase() !== currentAdminEmail.toLowerCase()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  setAuthError('Access Denied: Unauthorized Admin email.'); setIsLoading(false); return;
Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await signInWithEmailAndPassword(auth, email, pwd);
Â  Â  Â  Â  Â  Â  Â  Â  Â  setAuthSuccessMsg('Admin Login successful!');
Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (error.code === 'auth/user-not-found' || error.code === 'auth/invalid-credential') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await createUserWithEmailAndPassword(auth, email, pwd);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setAuthSuccessMsg('Admin Account Initialized!');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (createErr) { setAuthError(createErr.message); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  } else setAuthError('Login failed: ' + error.message);
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  setIsLoading(false); return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  if (authMethod === 'signup') {
Â  Â  Â  Â  Â  Â  Â  Â  const userCredential = await createUserWithEmailAndPassword(auth, email, pwd);
Â  Â  Â  Â  Â  Â  Â  Â  await sendEmailVerification(userCredential.user);
Â  Â  Â  Â  Â  Â  Â  Â  await finalizeLogin(userCredential.user.email, 'customer', pwd);
Â  Â  Â  Â  Â  Â  Â  Â  await auth.signOut();Â 
Â  Â  Â  Â  Â  Â  Â  Â  setAuthSuccessMsg('Registration successful! Check email to verify.');
Â  Â  Â  Â  Â  Â  Â  Â  setAuthMethod('login');Â 
Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  const userCredential = await signInWithEmailAndPassword(auth, email, pwd);
Â  Â  Â  Â  Â  Â  Â  Â  if (!userCredential.user.emailVerified) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â await auth.signOut(); setAuthError('Email not verified. Check inbox.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setIsLoading(false); return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  await finalizeLogin(userCredential.user.email, 'customer', pwd);
Â  Â  Â  Â  Â  Â  Â  Â  setAuthSuccessMsg('Welcome back!');
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) { setAuthError(error.message); }
Â  Â  Â  Â  Â  Â  finally { setIsLoading(false); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleForgotPassword = async () => {
Â  Â  Â  Â  Â  Â  if (!emailInput.trim()) { setAuthError('Enter your email to receive a password reset link.'); return; }
Â  Â  Â  Â  Â  Â  setIsLoading(true);
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await sendPasswordResetEmail(auth, emailInput.trim());
Â  Â  Â  Â  Â  Â  Â  setAuthError(''); setAuthSuccessMsg('Password reset link sent! Check your inbox.');
Â  Â  Â  Â  Â  Â  } catch (error) { setAuthError(error.message); }Â 
Â  Â  Â  Â  Â  Â  finally { setIsLoading(false); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleLogout = () => {
Â  Â  Â  Â  Â  Â  signOut(auth).then(() => {
Â  Â  Â  Â  Â  Â  Â  setUser(null); setCart([]); setShowCart(false); setEmailInput(''); setPasswordInput('');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const triggerToast = (msg) => {
Â  Â  Â  Â  Â  Â  Â  const id = Date.now(); setToastData({ show: true, msg, id });
Â  Â  Â  Â  Â  Â  Â  setTimeout(() => { setToastData(prev => prev.id === id ? { ...prev, show: false } : prev); }, 3500);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const addNotification = (title, text) => {
Â  Â  Â  Â  Â  Â  setNotifications(prev => [{ id: Date.now(), title, text, time: 'Just now' }, ...prev].slice(0, 5));
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  if (showSplash) return <SplashScreen />;

Â  Â  Â  Â  Â  if (!user) {
Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  <div className="min-h-screen flex items-center justify-center p-4 relative font-sans w-full bg-[#0f172a] text-white">
Â  Â  Â  Â  Â  Â  Â  Â  <PremiumBackground />
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute top-4 right-4 sm:top-6 sm:right-8 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-lg text-slate-800 dark:text-white border border-slate-200/50 dark:border-slate-700/50 transition-all hover:scale-110">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isDarkMode ? <Sun className="w-5 h-5"/> : <Moon className="w-5 h-5"/>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full max-w-[420px] animate-fade-in-up z-10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col items-center mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div onDoubleClick={() => setAuthMethod(authMethod === 'admin' ? 'login' : 'admin')} className="w-20 h-20 rounded-[1.5rem] bg-white/80 dark:bg-[#0f172a]/80 backdrop-blur-xl border border-slate-200/50 dark:border-white/10 flex items-center justify-center mb-5 shadow-xl relative overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-gradient-to-br from-violet-500/10 to-transparent"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Lock className="w-8 h-8 text-violet-500 dark:text-violet-400 relative z-10" strokeWidth={2.5}/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-500 via-cyan-500 to-violet-600 text-center tracking-tight">VoiceStore</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-8 border-t-4 border-t-violet-500"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {authMethod !== 'admin' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex bg-slate-100/80 dark:bg-black/40 backdrop-blur-md p-1.5 rounded-xl mb-8 border border-slate-200/50 dark:border-white/5 shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button type="button" onClick={() => { setAuthMethod('login'); setAuthError(''); setAuthSuccessMsg(''); }} className={`flex-1 flex items-center justify-center py-2.5 rounded-lg text-sm font-bold transition-all duration-300 ${authMethod === 'login' ? 'bg-white dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm border border-slate-200/50 dark:border-white/10' : 'text-slate-500 hover:text-slate-900 dark:hover:text-white'}`}>Log In</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button type="button" onClick={() => { setAuthMethod('signup'); setAuthError(''); setAuthSuccessMsg(''); }} className={`flex-1 flex items-center justify-center py-2.5 rounded-lg text-sm font-bold transition-all duration-300 ${authMethod === 'signup' ? 'bg-white dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm border border-slate-200/50 dark:border-white/10' : 'text-slate-500 hover:text-slate-900 dark:hover:text-white'}`}>Sign Up</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {authMethod === 'admin' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="text-center mb-8 pb-4 border-b border-slate-200 dark:border-white/10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-xs font-black text-rose-500 dark:text-rose-400 uppercase tracking-widest flex items-center justify-center gap-1.5"><ShieldAlert className="w-4 h-4"/> Admin Access</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={handleAuthSubmit} className="space-y-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {authError && <div className="text-rose-500 text-sm font-bold bg-rose-50 dark:bg-rose-500/10 border border-rose-200 dark:border-rose-500/20 p-3 rounded-xl flex items-center gap-2 shadow-sm"><AlertTriangle className="w-4 h-4"/>{authError}</div>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {authSuccessMsg && <div className="text-emerald-600 text-sm font-bold bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 p-3 rounded-xl flex items-center gap-2 shadow-sm"><CheckCircle className="w-4 h-4"/>{authSuccessMsg}</div>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs font-bold text-slate-500 dark:text-slate-400 pl-1 uppercase tracking-wider">{authMethod === 'admin' ? 'Admin Email' : 'Email Address'}</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" value={emailInput} onChange={e=>setEmailInput(e.target.value)} placeholder="name@example.com" required className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center px-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Password</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {(authMethod === 'login' || authMethod === 'admin') && <button type="button" onClick={handleForgotPassword} className="text-xs font-bold text-violet-500 hover:text-violet-600 transition-colors">Forgot?</button>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" value={passwordInput} onChange={e=>setPasswordInput(e.target.value)} placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" disabled={isLoading} className={uiBtnPrimary}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isLoading ? 'Processing...' : (authMethod === 'signup' ? 'Create Account' : authMethod === 'login' ? 'Secure Login' : 'Admin Login')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {!isLoading && <ArrowRight className="w-4 h-4" />}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  const currentUserBalance = user.role === 'customer' ? (usersDB[user.email]?.balance || 0) : 0;
Â  Â  Â  Â  Â  const currentUserTier = user.role === 'customer' ? getTier(usersDB[user.email]?.totalSpent || 0) : null;

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="min-h-screen w-full relative overflow-x-hidden font-sans pb-24 flex flex-col bg-[#0f172a] text-white transition-colors duration-500">
Â  Â  Â  Â  Â  Â  Â  <PremiumBackground />
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  {toastData.show && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed top-6 left-1/2 -translate-x-1/2 z-[200] animate-slide-down w-[90%] sm:w-auto max-w-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white/90 dark:bg-[#0f172a]/90 backdrop-blur-3xl border border-slate-200/50 dark:border-white/10 p-4 rounded-2xl shadow-2xl flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CheckCircle className="w-6 h-6 text-emerald-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold text-sm text-slate-800 dark:text-white">{toastData.msg}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  <header className="sticky top-0 z-40 w-full bg-white/5 dark:bg-black/10 backdrop-blur-[2px] border-b border-white/20 shadow-sm transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="max-w-7xl mx-auto px-4 h-16 sm:h-20 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-cyan-500/10 border border-violet-500/30 flex items-center justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Lock className="w-5 h-5 text-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-lg sm:text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-violet-500 to-cyan-500 hidden sm:block">VoiceStore</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3 sm:gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 sm:p-2.5 rounded-xl bg-white/50 dark:bg-white/5 border border-slate-200/50 dark:border-white/10 shadow hover:text-violet-500 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isDarkMode ? <Sun className="w-4 h-4"/> : <Moon className="w-4 h-4"/>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {user.role === 'customer' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white/60 dark:bg-white/5 px-3 sm:px-4 py-1.5 sm:py-2 rounded-xl flex items-center gap-2 border border-slate-200/50 dark:border-white/10 shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Wallet className="w-4 h-4 text-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold text-sm">${Number(currentUserBalance).toFixed(2)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={handleLogout} className="p-2.5 bg-rose-50/80 dark:bg-rose-500/10 text-rose-500 rounded-xl border border-rose-200/50 dark:border-rose-500/20"><LogOut className="w-5 h-5" /></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </header>

Â  Â  Â  Â  Â  Â  Â  <main className="max-w-7xl mx-auto px-4 mt-6 sm:mt-8 relative z-10 w-full flex-grow flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full relative z-30 pb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white/10 dark:bg-black/20 border border-white/30 dark:border-white/10 backdrop-blur-md rounded-2xl p-1 flex justify-between sm:justify-start gap-0.5 sm:gap-2 shadow-[0_8px_32px_0_rgba(0,0,0,0.1)] w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {(user.role === 'admin' ? ADMIN_TABS : CUSTOMER_TABS).map(tab => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`flex-1 sm:flex-none flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 py-2 px-1 sm:px-4 rounded-xl font-bold transition-all min-w-[60px] sm:min-w-0 ${activeTab === tab.id ? 'bg-white/80 dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm border border-white/50 dark:border-white/10' : 'text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tab.icon className={`w-4 h-4 sm:w-4 sm:h-4 ${activeTab === tab.id ? 'text-violet-500 drop-shadow-[0_0_5px_currentColor]' : ''}`} />Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-[9px] sm:text-xs font-bold text-center leading-tight">{tab.label}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  {/* --- RENDER DIFFERENT TABS BASED ON ROLE --- */}
Â  Â  Â  Â  Â  Â  Â  Â  {user.role === 'admin' ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <AdminDashboardÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inventory={inventory} orders={allOrders} deposits={deposits} categories={categories} usersDB={usersDB}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast={triggerToast} db={db} appId={appId} promoSettings={promoSettings} globalNotice={globalNotice}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tickets={tickets} featureSettings={featureSettings} bankSettings={bankSettings} smsSettings={smsSettings}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auth={auth} user={user} uiCard={uiCard} uiInput={uiInput} uiBtnPrimary={uiBtnPrimary} uiBtnSecondary={uiBtnSecondary} uiBtnAction={uiBtnAction} uiInnerPanel={uiInnerPanel} activeTab={activeTab}
Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'sms' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CustomerDashboardSMS user={user} balance={currentUserBalance} triggerToast={triggerToast} smsSettings={smsSettings} uiCard={uiCard} uiInput={uiInput} uiBtnPrimary={uiBtnPrimary} uiInnerPanel={uiInnerPanel} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'store' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CustomerDashboardStore inventory={inventory} categories={categories} cart={cart} setCart={setCart} allOrders={allOrders} uiCard={uiCard} uiInput={uiInput} uiBtnPrimary={uiBtnPrimary} uiInnerPanel={uiInnerPanel} triggerToast={triggerToast} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'add_funds' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CustomerDashboardFunds user={user} db={db} appId={appId} triggerToast={triggerToast} addNotification={addNotification} bankSettings={bankSettings} uiCard={uiCard} uiInput={uiInput} uiBtnPrimary={uiBtnPrimary} uiBtnSecondary={uiBtnSecondary} uiInnerPanel={uiInnerPanel} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'my_accounts' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CustomerDashboardVault user={user} purchases={purchases} triggerToast={triggerToast} db={db} appId={appId} uiCard={uiCard} uiBtnPrimary={uiBtnPrimary} uiInnerPanel={uiInnerPanel} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'profile' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CustomerDashboardProfile user={user} balance={currentUserBalance} tier={currentUserTier} userInfo={usersDB[user.email]} allOrders={allOrders} deposits={deposits} purchases={purchases} tickets={tickets.filter(t => t.email === user.email)} db={db} appId={appId} featureSettings={featureSettings} triggerToast={triggerToast} uiCard={uiCard} uiInput={uiInput} uiBtnPrimary={uiBtnPrimary} uiBtnSecondary={uiBtnSecondary} uiInnerPanel={uiInnerPanel} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  </main>

Â  Â  Â  Â  Â  Â  Â  {showCart && user.role === 'customer' && (
Â  Â  Â  Â  Â  Â  Â  Â  <CartModalÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  cart={cart} setCart={setCart} setShowCart={setShowCart} balance={currentUserBalance}
Â  Â  Â  Â  Â  Â  Â  Â  Â  user={user} promoSettings={promoSettings} addNotification={addNotification} triggerToast={triggerToast}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  uiCard={uiCard} uiBtnPrimary={uiBtnPrimary} uiInnerPanel={uiInnerPanel}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // ðŸŒŸ SMS MODULE (WITH 3 MIN AUTO-CANCEL, SEARCH, ONE ORDER LIMIT) ðŸŒŸ
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CustomerDashboardSMS({ user, balance, triggerToast, smsSettings, uiCard, uiInput, uiBtnPrimary, uiInnerPanel }) {
Â  Â  Â  Â  Â  const [isSmsLoading, setIsSmsLoading] = useState(false);
Â  Â  Â  Â  Â  const [selectedSmsService, setSelectedSmsService] = useState('1');Â 
Â  Â  Â  Â  Â  const [availableServices, setAvailableServices] = useState([]);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [isAppDropdownOpen, setIsAppDropdownOpen] = useState(false);
Â  Â  Â  Â  Â  const [appSearch, setAppSearch] = useState('');
Â  Â  Â  Â  Â  const [isFetchingServices, setIsFetchingServices] = useState(false);
Â  Â  Â  Â  Â  const [smsCountry, setSmsCountry] = useState('12');Â 
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const SMS_COUNTRIES = [
Â  Â  Â  Â  Â  Â  Â  { id: '12', name: 'USA', flag: 'ðŸ‡ºðŸ‡¸', prefix: '1' },
Â  Â  Â  Â  Â  Â  Â  { id: '16', name: 'UK', flag: 'ðŸ‡¬ðŸ‡§', prefix: '44' },
Â  Â  Â  Â  Â  Â  Â  { id: '48', name: 'Netherlands', flag: 'ðŸ‡³ðŸ‡±', prefix: '31' },
Â  Â  Â  Â  Â  Â  Â  { id: '132', name: 'Philippines', flag: 'ðŸ‡µðŸ‡­', prefix: '63' }
Â  Â  Â  Â  Â  ];

Â  Â  Â  Â  Â  const latestOrderRef = useRef(null);

Â  Â  Â  Â  Â  const [activeOrders, setActiveOrders] = useState(() => {
Â  Â  Â  Â  Â  Â  Â  const saved = localStorage.getItem(`smsOrders_${user?.email}`);
Â  Â  Â  Â  Â  Â  Â  if (saved) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  try { return JSON.parse(saved).filter(o => o.status === 'ACTIVE'); } catch(e) {}
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  return [];
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const [now, setNow] = useState(Date.now());

Â  Â  Â  Â  Â  useEffect(() => { if (user?.email) localStorage.setItem(`smsOrders_${user.email}`, JSON.stringify(activeOrders)); }, [activeOrders, user]);
Â  Â  Â  Â  Â  useEffect(() => { const int = setInterval(() => setNow(Date.now()), 1000); return () => clearInterval(int); }, []);

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  if (smsSettings?.active) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  setIsFetchingServices(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  fetch(`https://voicestore-backend.onrender.com/api/grizzly/getPrices?country=${smsCountry}`)
Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.json()).then(json => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (json.success) setAvailableServices(json.data);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setIsFetchingServices(false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  }).catch(() => setIsFetchingServices(false));
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }, [smsSettings, smsCountry]);

Â  Â  Â  Â  Â  // Trigger Auto-Scroll
Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  Â if (activeOrders.length > 0 && latestOrderRef.current) {
Â  Â  Â  Â  Â  Â  Â  Â  Â setTimeout(() => latestOrderRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300);
Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  }, [activeOrders.length]);

Â  Â  Â  Â  Â  const filteredApps = availableServices.filter(s => s.name.toLowerCase().includes(appSearch.toLowerCase()));
Â  Â  Â  Â  Â  const currentService = availableServices.find(s => s.code === selectedSmsService);
Â  Â  Â  Â  Â  const currentSmsPrice = currentService ? parseFloat(currentService.finalPrice.toFixed(2)) : 0;

Â  Â  Â  Â  Â  // ðŸŒŸ BUY NUMBER (Set 3 Minutes Expiry / 180s & Single Order Limit) ðŸŒŸ
Â  Â  Â  Â  Â  const buySmsNumber = async () => {
Â  Â  Â  Â  Â  Â  Â  if (!currentService) return;
Â  Â  Â  Â  Â  Â  Â  if (activeOrders.length > 0) { triggerToast("Please complete your current active order first."); return; } // One order limit
Â  Â  Â  Â  Â  Â  Â  if (balance < currentSmsPrice) { triggerToast("Insufficient balance."); return; }
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  setIsSmsLoading(true);
Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const deductRes = await fetch('https://voicestore-backend.onrender.com/api/sms-deduct', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email: user.email, price: currentSmsPrice })
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  const deductData = await deductRes.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!deductData.success) { triggerToast(deductData.message || "Balance deduction failed."); setIsSmsLoading(false); return; }

Â  Â  Â  Â  Â  Â  Â  Â  Â  const res = await fetch('https://voicestore-backend.onrender.com/api/juicy/getNumber', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ serviceId: selectedSmsService, countryId: smsCountry })
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data.success && data.phone) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newOrder = {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: data.orderId, phone: data.phone, service: currentService.name, countryId: smsCountry,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  price: currentSmsPrice, status: 'ACTIVE', codes: [],Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  expiresAt: Date.now() + 180 * 1000, // ðŸŒŸ 3 MINUTES TIMER ðŸŒŸ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isCancelling: false, isNew: true
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => [newOrder, ...prev]);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast("Number assigned successfully!");
Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await fetch('https://voicestore-backend.onrender.com/api/sms-refund', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email: user.email, price: currentSmsPrice })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(data.message || "Failed to get number.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  } catch (e) { triggerToast("Connection Error"); }Â 
Â  Â  Â  Â  Â  Â  Â  finally { setIsSmsLoading(false); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const cancelSmsOrder = async (orderId, priceToRefund, isAuto = false) => {
Â  Â  Â  Â  Â  Â  Â  // ðŸš€ FIX: à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ à¦¹à¦²à§‡ à¦¸à¦¾à¦¥à§‡ à¦¸à¦¾à¦¥à§‡ à¦¸à§à¦•à§à¦°à¦¿à¦¨ à¦¥à§‡à¦•à§‡ à¦¨à¦¾à¦®à§à¦¬à¦¾à¦° à¦—à¦¾à¦¯à¦¼à§‡à¦¬ à¦•à¦°à§‡ à¦¦à§‡à¦¬à§‡
Â  Â  Â  Â  Â  Â  Â  if (isAuto) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => prev.filter(o => o.id !== orderId));
Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Time expired. Auto-cancelled & refunded.`);
Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const cancelRes = await fetch(`https://voicestore-backend.onrender.com/api/juicy/cancel`, { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({orderId}) });Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  const cancelData = await cancelRes.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!cancelData.success && !String(cancelData.message).includes('already closed')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // à¦¯à¦¦à¦¿ à¦®à§à¦¯à¦¾à¦¨à§à¦¯à¦¼à¦¾à¦²à¦¿ à¦•à§à¦¯à¦¾à¦¨à¦¸à§‡à¦² à¦•à¦°à§‡ à¦¤à¦¬à§‡à¦‡ à¦¬à§à¦²à¦• à¦¹à¦¬à§‡, à¦…à¦Ÿà§‹ à¦¹à¦²à§‡ à¦°à¦¿à¦«à¦¾à¦¨à§à¦¡ à¦¹à¦¬à§‡à¦‡!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isAuto) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(cancelData.message);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  // ðŸš€ à¦¬à§à¦¯à¦¾à¦•à¦—à§à¦°à¦¾à¦‰à¦¨à§à¦¡à§‡ à¦¬à§à¦¯à¦¾à¦²à§‡à¦¨à§à¦¸ à¦°à¦¿à¦«à¦¾à¦¨à§à¦¡ à¦•à¦°à§‡ à¦¦à§‡à¦¬à§‡
Â  Â  Â  Â  Â  Â  Â  Â  Â  await fetch('https://voicestore-backend.onrender.com/api/sms-refund', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email: user.email, price: priceToRefund })
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isAuto) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Cancelled. $${priceToRefund.toFixed(2)} refunded.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => prev.filter(o => o.id !== orderId));
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  } catch (e) {}Â 
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  // ðŸŒŸ FAST POLLING & AUTO-CANCEL LOGIC (Every 3 Seconds) ðŸŒŸ
Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  if(activeOrders.length === 0) return;
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  const interval = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  activeOrders.forEach(async (order) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (order.codes.length > 0) return;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ðŸŒŸ 3-MINUTE AUTO CANCEL TRIGGER ðŸŒŸ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (Date.now() >= order.expiresAt) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!order.isCancelling) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  order.isCancelling = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ðŸš€ FORCE REMOVE FROM SCREEN IMMEDIATELY ðŸš€
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => prev.filter(o => o.id !== order.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Time expired. Auto-cancelled & refunded.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cancelSmsOrder(order.id, order.price, true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Normal Status Polling
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const res = await fetch(`https://voicestore-backend.onrender.com/api/juicy/getStatus?orderId=${order.id}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data.success && data.status === 'OK' && data.code) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => prev.map(o => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (o.id === order.id && !o.codes.includes(data.code)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`New OTP Received!`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetch('https://voicestore-backend.onrender.com/api/sms-save', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email: user.email, type: `Live SMS (${o.service})`, data: `Phone: ${o.phone}\nOTP Code: ${data.code}` })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return { ...o, codes: [...o.codes, data.code] };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return o;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (String(data.status).includes('CANCEL')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setActiveOrders(prev => prev.filter(o => o.id !== order.id));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch(e) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  }, 3000);Â 
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  return () => clearInterval(interval);
Â  Â  Â  Â  Â  }, [activeOrders, user]);

Â  Â  Â  Â  Â  const copyText = (text) => {
Â  Â  Â  Â  Â  Â  Â if (navigator.clipboard) navigator.clipboard.writeText(text).then(() => triggerToast("Copied!"));
Â  Â  Â  Â  Â  Â  Â else { const t = document.createElement("textarea"); t.value = text; document.body.appendChild(t); t.select(); document.execCommand("copy"); document.body.removeChild(t); triggerToast("Copied!"); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const formatPhoneDisplay = (phone, countryId) => {
Â  Â  Â  Â  Â  Â  Â const country = SMS_COUNTRIES.find(c => String(c.id) === String(countryId));
Â  Â  Â  Â  Â  Â  Â let p = String(phone).replace(/\D/g, '');Â 
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â if (country) {
Â  Â  Â  Â  Â  Â  Â  Â  Â // à¦¯à¦¦à¦¿ à¦¨à¦®à§à¦¬à¦°à§‡à¦° à¦¶à§à¦°à§à¦¤à§‡ à¦†à¦—à§‡ à¦¥à§‡à¦•à§‡à¦‡ à¦•à¦¾à¦¨à§à¦Ÿà§à¦°à¦¿ à¦•à§‹à¦¡ à¦¥à¦¾à¦•à§‡
Â  Â  Â  Â  Â  Â  Â  Â  Â if (p.startsWith(country.prefix)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return `+${country.prefix} ${p.substring(country.prefix.length)}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â // à¦¯à¦¦à¦¿ à¦•à¦¾à¦¨à§à¦Ÿà§à¦°à¦¿ à¦•à§‹à¦¡ à¦¨à¦¾ à¦¥à¦¾à¦•à§‡, à¦¤à¦¬à§‡ à¦œà§‹à¦° à¦•à¦°à§‡ à¦¸à¦¾à¦®à¦¨à§‡ à¦¬à¦¸à¦¿à¦¯à¦¼à§‡ à¦¦à§‡à¦¬à§‡
Â  Â  Â  Â  Â  Â  Â  Â  Â return `+${country.prefix} ${p}`;
Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â return `+${p}`;Â 
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const copyNumberOnly = (phone, countryId) => {
Â  Â  Â  Â  Â  Â  Â const country = SMS_COUNTRIES.find(c => String(c.id) === String(countryId));
Â  Â  Â  Â  Â  Â  Â let p = String(phone).replace(/\D/g, '');Â 
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â if (country) {
Â  Â  Â  Â  Â  Â  Â  Â  Â if (p.startsWith(country.prefix)) copyText(p.substring(country.prefix.length));
Â  Â  Â  Â  Â  Â  Â  Â  Â else copyText(p);
Â  Â  Â  Â  Â  Â  Â } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â copyText(p);Â 
Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  if(!smsSettings?.active) return (
Â  Â  Â  Â  Â  Â  Â <div className={uiCard + " text-center py-20 text-slate-500 font-medium w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  <Smartphone className="w-12 h-12 mx-auto mb-4 opacity-20"/>
Â  Â  Â  Â  Â  Â  Â  Â  Live SMS Verification is currently disabled by Admin.
Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  );

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="w-full max-w-2xl mx-auto space-y-6 sm:space-y-8 animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2.5 uppercase tracking-wider">Select Network Region</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {SMS_COUNTRIES.map(c => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={c.id} onClick={() => setSmsCountry(c.id)} className={`flex items-center justify-center gap-1.5 py-3.5 font-bold rounded-xl cursor-pointer border transition-all ${smsCountry === c.id ? "bg-violet-500 text-white border-violet-500 shadow-[0_4px_15px_rgba(245,158,11,0.4)]" : "bg-slate-50/80 dark:bg-white/5 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-white/10 hover:bg-slate-100 dark:hover:bg-white/10"}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-base">{c.flag}</span> <span className="text-xs sm:text-sm">{c.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-slate-50/50 dark:bg-black/20 p-5 rounded-2xl border border-slate-200 dark:border-white/5 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Search & Select App</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex flex-col sm:flex-row gap-4 items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="relative w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <divÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â onClick={() => setIsAppDropdownOpen(!isAppDropdownOpen)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â className={uiInput + " h-14 pl-12 pr-10 flex items-center justify-between cursor-pointer font-bold text-slate-800 dark:text-white border-2 " + (isAppDropdownOpen ? "border-violet-500/50 ring-2 ring-violet-500/20" : "")}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="truncate">{availableServices.length === 0 ? 'Syncing...' : (currentService ? currentService.name : 'Select an App')}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Smartphone className="w-5 h-5 text-violet-500 absolute left-4"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <ChevronDown className={`w-4 h-4 text-slate-400 absolute right-4 transition-transform ${isAppDropdownOpen ? 'rotate-180' : ''}`}/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {isAppDropdownOpen && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="fixed inset-0 z-30" onClick={() => setIsAppDropdownOpen(false)}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="absolute top-full left-0 mt-2 w-full bg-white dark:bg-brand-darkCard border border-slate-200 dark:border-white/10 rounded-xl shadow-2xl z-40 overflow-hidden animate-pop-in">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="p-3 border-b border-slate-100 dark:border-white/5 relative bg-slate-50 dark:bg-black/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Search className="w-4 h-4 text-slate-400 absolute left-6 top-6"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <inputÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â type="text" autoFocus placeholder="Type to search app..."Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â value={appSearch} onChange={(e) => setAppSearch(e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â className="w-full bg-white dark:bg-black/50 border border-slate-200 dark:border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-sm outline-none focus:border-violet-500/50 text-slate-900 dark:text-white"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="max-h-64 overflow-y-auto custom-scrollbar p-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {filteredApps.length === 0 ? <p className="text-center text-slate-500 py-6 text-sm">No apps found.</p> :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â filteredApps.map(s => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div key={s.code} onClick={() => { setSelectedSmsService(s.code); setIsAppDropdownOpen(false); setAppSearch(''); }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â className={`px-4 py-3 cursor-pointer rounded-lg text-sm font-semibold transition-colors flex justify-between items-center ${selectedSmsService === s.code ? 'bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400' : 'text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/5'}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span>{s.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="bg-white dark:bg-brand-darkBg border border-slate-200 dark:border-white/10 px-6 rounded-2xl text-slate-900 dark:text-white font-black text-2xl h-14 flex items-center justify-center w-full sm:w-auto shadow-inner shrink-0 min-w-[140px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ${currentService ? currentService.finalPrice.toFixed(2) : '0.00'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={buySmsNumber} disabled={isSmsLoading || isFetchingServices || !currentService || activeOrders.length > 0} className={uiBtnPrimary + " h-14 text-lg mt-6"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeOrders.length > 0 ? <span className="flex items-center gap-2"><StopCircle className="w-5 h-5"/> Complete Current Order First</span> : isSmsLoading ? <RefreshCw className="w-5 h-5 animate-spin"/> : <ShoppingCart className="w-5 h-5"/>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeOrders.length > 0 ? '' : isSmsLoading ? 'Connecting to Network...' : 'Purchase Number'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  {activeOrders.map((order, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const timeLeft = Math.max(0, Math.floor((order.expiresAt - now) / 1000));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={order.id} ref={index === 0 ? latestOrderRef : null} className={uiCard + " border-violet-400/50 bg-white/90 dark:bg-[#18181b]/90 shadow-2xl relative overflow-hidden flex flex-col items-center py-10 px-6 " + (order.isNew ? "animate-super-glow" : "")}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute top-0 left-0 w-full h-1.5 bg-slate-200 dark:bg-slate-800">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-gradient-to-r from-violet-400 to-cyan-500 h-full transition-all ease-linear shadow-[0_0_10px_rgba(245,158,11,0.8)]" style={{width: `${(timeLeft / 180) * 100}%`}}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm font-bold text-slate-500 dark:text-slate-400 mb-6 uppercase tracking-widest">Service: <span className="text-violet-600 dark:text-violet-400">{order.service}</span></p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3 w-full max-w-md mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-2xl sm:text-3xl font-mono font-black text-slate-900 dark:text-white bg-slate-50 dark:bg-black/40 px-6 py-4 rounded-2xl border border-slate-200 dark:border-white/10 shadow-inner flex-grow text-center whitespace-nowrap overflow-hidden text-ellipsis">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {formatPhoneDisplay(order.phone, order.countryId)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => copyNumberOnly(order.phone, order.countryId)} title="Copy number only" className="btn-animate p-4 bg-violet-50 dark:bg-violet-500/10 hover:bg-violet-100 dark:hover:bg-violet-500/20 rounded-2xl text-violet-600 dark:text-violet-400 border border-violet-200 dark:border-violet-500/20 shadow-sm transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Copy className="w-6 h-6 drop-shadow-[0_0_5px_currentColor]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {order.codes.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full max-w-md bg-white dark:bg-white/5 p-5 rounded-2xl border border-slate-200 dark:border-white/10 shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-violet-600 dark:text-violet-400 font-bold mb-4 flex items-center justify-center gap-2 text-sm"><RefreshCw className="w-4 h-4 animate-spin"/> Listening for OTP...</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center w-full mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-mono font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1.5"><Clock className="w-4 h-4"/> {Math.floor(timeLeft / 60)}:{(timeLeft % 60).toString().padStart(2, '0')}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => cancelSmsOrder(order.id, order.price)} disabled={timeLeft > 160} className={`btn-animate text-xs font-bold px-4 py-2 rounded-lg border transition-all ${timeLeft > 160 ? 'bg-slate-100 dark:bg-slate-800 text-slate-400 dark:text-slate-500 border-slate-200 dark:border-slate-700 cursor-not-allowed' : 'text-rose-600 dark:text-rose-400 hover:text-rose-700 dark:hover:text-rose-300 bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/20 shadow-[0_0_10px_rgba(244,63,94,0.2)]'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {timeLeft > 160 ? `Wait ${timeLeft-160}s to Cancel` : 'Cancel & Refund'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full max-w-md space-y-4 animate-pop-in">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {order.codes.map((c, i) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={i} className="flex items-center justify-between gap-4 bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-300 dark:border-emerald-500/30 p-5 rounded-2xl shadow-[0_4px_20px_rgba(16,185,129,0.15)]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-sm sm:text-base font-mono font-bold text-emerald-700 dark:text-emerald-300 break-words whitespace-pre-wrap flex-grow">{c}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => copyText(c)} className="btn-animate p-3 bg-white dark:bg-white/10 hover:bg-slate-50 dark:hover:bg-white/20 rounded-xl text-emerald-600 dark:text-emerald-400 transition-colors shadow-sm shrink-0"><Copy className="w-5 h-5"/></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setActiveOrders(prev => prev.filter(o => o.id !== order.id))} className={uiBtnPrimary + " mt-6"}>Done & Close</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // STORE MODULE
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CustomerDashboardStore({ inventory, categories, cart, setCart, allOrders, uiCard, uiInput, uiBtnPrimary, uiInnerPanel, triggerToast }) {
Â  Â  Â  Â  Â  const [searchQuery, setSearchQuery] = useState('');
Â  Â  Â  Â  Â  const [previewStockModal, setPreviewStockModal] = useState({show: false, categoryId: null, name: ''});
Â  Â  Â  Â  Â  const filteredCategories = categories.filter(c => c.name.toLowerCase().includes(searchQuery.toLowerCase()));
Â  Â  Â  Â  Â  const recentActivity = allOrders.slice(0, 5);

Â  Â  Â  Â  Â  const addToCart = (productWithState) => {
Â  Â  Â  Â  Â  Â  const stockAvailable = inventory[productWithState.id] ? inventory[productWithState.id].length : 0;
Â  Â  Â  Â  Â  Â  const currentlyInCart = cart.filter(item => item.id === productWithState.id).length;
Â  Â  Â  Â  Â  Â  if (currentlyInCart >= stockAvailable) { triggerToast('Stock Limit Reached!'); return; }
Â  Â  Â  Â  Â  Â  setCart([...cart, productWithState]); triggerToast(`${productWithState.name} added to cart.`);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  {previewStockModal.show && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-[110] flex items-center justify-center p-4 bg-slate-900/60 dark:bg-[#030712]/80 backdrop-blur-sm transition-all duration-300">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " w-full max-w-md p-6 max-h-[80vh] flex flex-col"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center mb-5 pb-4 border-b border-slate-200 dark:border-white/10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="font-bold text-lg sm:text-xl text-slate-900 dark:text-white flex items-center gap-2"><Eye className="w-5 h-5 text-violet-500 dark:text-violet-400" /> Live Stock Preview</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setPreviewStockModal({show: false, categoryId: null, name: ''})} className="btn-animate p-2 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"><X className="w-5 h-5" /></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="overflow-y-auto pr-1 sm:pr-2 space-y-3 scrollbar-hide">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {(!inventory[previewStockModal.categoryId] || inventory[previewStockModal.categoryId].length === 0) ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-center text-sm text-slate-500 dark:text-slate-400 font-medium py-10">No stock currently available.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inventory[previewStockModal.categoryId].map((acc, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rawStr = String(acc);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let state = "US";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const stateMatch = rawStr.match(/ðŸ“ STATE:\s*\n?([^\n]+)/i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (stateMatch) state = stateMatch[1].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let phone = "Hidden";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const phoneMatch = rawStr.match(/ðŸ“± PHONE:\s*\n?([^\n]+)/i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (phoneMatch) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ph = phoneMatch[1].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const m = ph.match(/(?:\+1|1)?\s*\(?(\d{3})\)?[-.\s]?\d{3}[-.\s]?(\d{4})/);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (m) phone = m[1] + "****" + m[2].slice(-3);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div key={i} className={uiInnerPanel + " flex justify-between items-center"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3 sm:gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 font-bold px-2 sm:px-2.5 py-1 rounded-lg text-[10px] sm:text-xs uppercase border border-violet-200 dark:border-violet-500/20">{state}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="font-mono text-xs sm:text-sm text-slate-700 dark:text-slate-200 font-medium tracking-wide">{phone}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-[8px] sm:text-[10px] text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10 px-1.5 sm:px-2 py-1 rounded-md uppercase font-bold tracking-widest border border-emerald-200 dark:border-emerald-500/20">Ready</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  <div className="space-y-6 sm:space-y-8 animate-fade-in-up w-full">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full xl:w-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-2xl sm:text-3xl font-black text-slate-900 dark:text-white tracking-tight drop-shadow-sm">Marketplace</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-600 dark:text-slate-400 text-sm mt-1 font-medium">High-quality verified static accounts.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full xl:w-80">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="relative flex items-center w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Search className="w-4 h-4 text-slate-500 absolute left-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" placeholder="Search inventory..." value={searchQuery} onChange={(e)=>setSearchQuery(e.target.value)} className={uiInput + " pl-11"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {filteredCategories.map((product) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const [selectedState, setSelectedState] = useState('Any');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const stockList = inventory[product.id] || [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const totalStock = stockList.length;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const availableStates = [...new Set(stockList.map(acc => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let state = "US";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const stateMatch = String(acc).match(/ðŸ“ STATE:\s*\n?([^\n]+)/i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (stateMatch) state = stateMatch[1].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return state;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }))].sort();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentStockCount = selectedState === 'Any' ? totalStock : stockList.filter(acc => String(acc).includes(selectedState)).length;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const Icon = product.icon;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={product.id} className={uiCard + " p-6 flex flex-col group hover:-translate-y-1 hover:border-violet-500/30"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {totalStock === 0 && <div className="absolute inset-0 bg-slate-900/80 dark:bg-brand-darkBg/80 z-20 flex items-center justify-center backdrop-blur-sm"><span className="bg-slate-800 dark:bg-slate-900 text-white px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-widest shadow-xl border border-white/10">Out of Stock</span></div>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-start mb-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-slate-100 dark:bg-black/30 p-3.5 rounded-xl border border-slate-200 dark:border-white/5 shadow-inner group-hover:scale-110 transition-transform duration-300">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Icon className={`w-6 h-6 ${product.color} drop-shadow-[0_0_8px_currentColor]`} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 px-3 py-1.5 rounded-xl flex items-center text-slate-800 dark:text-white text-sm font-bold shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${Number(product.price).toFixed(2)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-2 break-words">{product.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-600 dark:text-slate-400 text-xs leading-relaxed mb-4 flex-grow font-medium break-words">{product.description}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {totalStock > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase tracking-wider">Select Preferred State</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select value={selectedState} onChange={(e) => setSelectedState(e.target.value)} className={uiInput + " !py-2.5 !text-xs cursor-pointer"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Any">Any State (Random Delivery)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {availableStates.map(st => <option key={st} value={st}>{st} State</option>)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center mt-auto pt-4 border-t border-slate-200 dark:border-white/5 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-1">Available</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className={`text-sm font-black drop-shadow-sm ${currentStockCount > 5 ? 'text-slate-800 dark:text-white' : 'text-rose-500 dark:text-rose-400'}`}>{currentStockCount} pcs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => addToCart({...product, selectedState: selectedState === 'Any' ? null : selectedState})} disabled={currentStockCount === 0} className={uiBtnPrimary + " !w-auto !py-2.5 !px-5 text-sm"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Add <Plus className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {totalStock > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 pt-4 border-t border-slate-200 dark:border-white/5 w-full text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p onClick={() => setPreviewStockModal({show: true, categoryId: product.id, name: product.name})} className="text-[10px] text-violet-600 dark:text-violet-400 cursor-pointer hover:text-violet-700 dark:hover:text-violet-300 font-bold tracking-wider uppercase flex items-center justify-center gap-1.5 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Eye className="w-3.5 h-3.5 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> View Full Live Stock Preview
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {filteredCategories.length === 0 && <div className="col-span-full py-20 text-center text-slate-500 font-medium"><Search className="w-12 h-12 mx-auto mb-4 opacity-20"/>No products match.</div>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="lg:col-span-1 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className={uiCard + " p-6 h-full flex flex-col"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="font-bold text-slate-900 dark:text-white mb-5 flex items-center gap-2 pb-4 border-b border-slate-200 dark:border-white/5 text-lg"><TrendingUp className="w-5 h-5 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Live Activity</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 overflow-y-auto flex-grow scrollbar-hide pr-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {recentActivity.map((act, i) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={i} className={uiInnerPanel + " !p-3 relative overflow-hidden group hover:bg-slate-200 dark:hover:bg-white/[0.05] transition-colors"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute top-0 left-0 w-1 h-full bg-violet-500 shadow-[0_0_10px_currentColor]"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-slate-700 dark:text-slate-300 font-medium ml-2 break-words">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold text-slate-900 dark:text-white">{(act.customer || 'User').split('@')[0]}***</span> bought <span className="font-bold text-emerald-600 dark:text-emerald-400 drop-shadow-sm">${Number(act.total || 0).toFixed(2)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 mt-2 ml-2 flex items-center gap-1.5 font-medium"><Clock className="w-3 h-3"/> {new Date(act.date).toLocaleTimeString()}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {recentActivity.length === 0 && <p className="text-sm text-slate-500 text-center py-10 font-medium">No recent activity.</p>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // FUNDS MODULE
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CustomerDashboardFunds({ user, db, appId, triggerToast, addNotification, bankSettings, uiCard, uiInput, uiBtnPrimary, uiBtnSecondary, uiInnerPanel }) {
Â  Â  Â  Â  Â  const [autoPay, setAutoPay] = useState({ active: false, amount: 0, time: 900, checking: false, invoiceId: '' });
Â  Â  Â  Â  Â  const TRON_ADDRESS = 'TELRyMwDmdKzBRb7Uaw3zNvphrc8V3D5Mj';
Â  Â  Â  Â  Â  const BTC_ADDRESS = '1EgVdWyoCsWepg3TAowifuhoR81Lm1xEUd';
Â  Â  Â  Â  Â  const [depositAmountUsd, setDepositAmountUsd] = useState('');
Â  Â  Â  Â  Â  const [cryptoMethod, setCryptoMethod] = useState('USDT TRC20');

Â  Â  Â  Â  Â  const startAutoDeposit = async (e) => {
Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  const baseAmount = parseFloat(e.target.amount.value);
Â  Â  Â  Â  Â  Â  Â  if (baseAmount < 1) { triggerToast('Minimum deposit is $1.00'); return; }
Â  Â  Â  Â  Â  Â  Â  const uniqueCents = (Math.floor(Math.random() * 99) + 1) / 100;Â 
Â  Â  Â  Â  Â  Â  Â  const finalAmount = +(baseAmount + uniqueCents).toFixed(2);
Â  Â  Â  Â  Â  Â  Â  const newInvoiceId = 'DEP-' + Date.now();
Â  Â  Â  Â  Â  Â  Â  let cryptoAmount = finalAmount;
Â  Â  Â  Â  Â  Â  Â  if (cryptoMethod === 'BTC') {
Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const btcRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const btcData = await btcRes.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â cryptoAmount = parseFloat((finalAmount / btcData.bitcoin.usd).toFixed(8));
Â  Â  Â  Â  Â  Â  Â  Â  Â } catch(e) { triggerToast("Failed to fetch BTC price."); return; }
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Deposits', newInvoiceId), {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: user.email, amount: finalAmount, cryptoAmount: cryptoAmount,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: `${cryptoMethod} (Auto)`, status: 'Awaiting Payment', date: new Date().toISOString(), txId: 'Pending'
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  setAutoPay({ active: true, amount: finalAmount, cryptoAmount: cryptoAmount, method: cryptoMethod, time: 1800, checking: true, invoiceId: newInvoiceId });
Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Invoice created for ${cryptoMethod}`);
Â  Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast("Request failed."); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleFlutterwavePayment = () => {
Â  Â  Â  Â  Â  Â  Â  if(!bankSettings?.flutterwaveActive || !bankSettings?.flutterwaveKey) { triggerToast("Flutterwave disabled."); return; }
Â  Â  Â  Â  Â  Â  Â  const usdAmt = parseFloat(depositAmountUsd);
Â  Â  Â  Â  Â  Â  Â  if(isNaN(usdAmt) || usdAmt < 1) { triggerToast("Minimum deposit is $1.00"); return; }
Â  Â  Â  Â  Â  Â  Â  const nairaRate = bankSettings?.nairaRate || 1500;
Â  Â  Â  Â  Â  Â  Â  const nairaAmount = usdAmt * nairaRate;
Â  Â  Â  Â  Â  Â  Â  if (typeof window.FlutterwaveCheckout !== 'undefined') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.FlutterwaveCheckout({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  public_key: bankSettings.flutterwaveKey, tx_ref: 'FLW-' + Math.floor((Math.random() * 1000000000) + 1), amount: nairaAmount, currency: "NGN",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  payment_options: "card, banktransfer, ussd", customer: { email: user.email },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  customizations: { title: "VoiceStore Premium", description: "Wallet Deposit ($" + usdAmt + ")" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  callback: async function (data) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(data.status === "successful" || data.status === "completed") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const userRef = doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', user.email);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const userDoc = await getDoc(userRef);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentBal = Number(userDoc.data()?.balance || 0);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(userRef, { balance: currentBal + Number(usdAmt) });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Deposits', data.transaction_id || data.tx_ref), {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: user.email, amount: Number(usdAmt), method: 'Card/Bank (Flutterwave)', status: 'Approved', date: new Date().toISOString(), txId: String(data.transaction_id || data.tx_ref)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Successfully added $${usdAmt.toFixed(2)}!`); setDepositAmountUsd('');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch(e) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclose: function() { triggerToast('Payment window closed.'); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  } else { triggerToast("Payment module loading... please try again."); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  React.useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  let interval;
Â  Â  Â  Â  Â  Â  Â  if (autoPay.active && autoPay.checking && autoPay.time > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  interval = setInterval(async () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('https://voicestore-backend.onrender.com/api/verify-deposit', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ invoiceId: autoPay.invoiceId, email: user.email, amount: autoPay.amount, method: `${autoPay.method} (Auto)`, cryptoAmount: autoPay.cryptoAmount })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result.success) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setAutoPay(prev => ({...prev, checking: false}));Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(`Success! $${autoPay.amount} auto-credited.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setAutoPay({ active: false, amount: 0, cryptoAmount: 0, time: 0, checking: false, invoiceId: '' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addNotification('Deposit Successful', `$${autoPay.amount} added to your wallet.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 15000);Â 
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  const timer = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (autoPay.active && autoPay.time > 0) { setAutoPay(prev => ({ ...prev, time: prev.time - 1 })); }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (autoPay.active && autoPay.time <= 0 && autoPay.checking) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try { updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Deposits', autoPay.invoiceId), { status: 'Expired' }); } catch (e) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setAutoPay({ active: false, amount: 0, cryptoAmount: 0, time: 0, checking: false, invoiceId: '' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast('Payment window expired.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  }, 1000);
Â  Â  Â  Â  Â  Â  Â  return () => { clearInterval(interval); clearInterval(timer); };
Â  Â  Â  Â  Â  }, [autoPay, db, appId, user.email, addNotification]);

Â  Â  Â  Â  Â  const copyToClipboard = (text) => {
Â  Â  Â  Â  Â  Â  Â if (navigator.clipboard) navigator.clipboard.writeText(text).then(() => triggerToast("Copied!"));
Â  Â  Â  Â  Â  Â  Â else { const t = document.createElement("textarea"); t.value = text; document.body.appendChild(t); t.select(); document.execCommand("copy"); document.body.removeChild(t); triggerToast("Copied!"); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="animate-fade-in-up grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 w-full">
Â  Â  Â  Â  Â  Â  Â  <div className="space-y-6 sm:space-y-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 border-violet-200 dark:border-violet-500/30 h-fit"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold mb-2 text-slate-900 dark:text-white flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Zap className="w-6 h-6 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Auto Crypto Deposit
Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  {!autoPay.active ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-slate-600 dark:text-slate-400 mb-6 font-medium leading-relaxed">Enter desired amount and select your preferred crypto network. Our engine will detect the payment automatically.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={startAutoDeposit} className="space-y-5 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Deposit Amount (USD)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <DollarSign className="w-5 h-5 text-slate-400 dark:text-slate-500 absolute left-4 top-3.5" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" step="1" min="1" name="amount" required placeholder="10" className={uiInput + " pl-12 text-lg font-bold h-12"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Select Network</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select value={cryptoMethod} onChange={e => setCryptoMethod(e.target.value)} className={uiInput + " h-12 cursor-pointer"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="USDT TRC20">USDT (TRC20 Network)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="BTC">Bitcoin (BTC Network)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" className={uiBtnPrimary + " h-12 text-sm mt-2"}>Generate Invoice</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiInnerPanel + " text-center space-y-6 relative overflow-hidden mt-6 bg-slate-100 dark:bg-black/40 shadow-inner"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute top-0 left-0 w-full h-1.5 bg-slate-200 dark:bg-slate-800">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="h-full bg-gradient-to-r from-violet-500 to-cyan-600 transition-all duration-1000 shadow-[0_0_10px_currentColor]" style={{ width: `${(autoPay.time / 1800) * 100}%` }}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm font-bold text-slate-900 dark:text-white flex items-center justify-center gap-2.5 pt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="w-2.5 h-2.5 bg-violet-500 dark:bg-violet-400 rounded-full animate-pulse shadow-[0_0_5px_currentColor]"></span> Listening to {autoPay.method}...
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-4xl sm:text-5xl font-black text-violet-600 dark:text-violet-400 tracking-tight drop-shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {autoPay.cryptoAmount} {autoPay.method === 'BTC' ? 'BTC' : 'USDT'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 font-medium text-sm">Equals to ${autoPay.amount.toFixed(2)} USD</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-4 rounded-xl mt-4 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-2">Send exactly to this Address</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-mono text-xs sm:text-sm text-slate-900 dark:text-white break-all select-all font-semibold tracking-wide">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {autoPay.method === 'BTC' ? BTC_ADDRESS : TRON_ADDRESS}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => copyToClipboard(autoPay.method === 'BTC' ? BTC_ADDRESS : TRON_ADDRESS)} className={uiBtnSecondary + " !w-auto !py-2 !px-4 mt-3 mx-auto"}><Copy className="w-4 h-4" /> Copy Address</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-rose-50 dark:bg-rose-500/10 p-4 rounded-xl border border-rose-200 dark:border-rose-500/20 text-left">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-xs text-rose-600 dark:text-rose-400 font-bold mb-1.5 flex items-center gap-1.5 uppercase tracking-wider"><AlertTriangle className="w-4 h-4"/> Critical Instruction</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-xs sm:text-sm text-slate-700 dark:text-slate-300 leading-relaxed font-medium">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  You MUST send exactly <span className="font-bold text-slate-900 dark:text-white border-b border-rose-400">{autoPay.cryptoAmount} {autoPay.method === 'BTC' ? 'BTC' : 'USDT'}</span>. Different amounts will <span className="text-rose-600 dark:text-rose-400 font-bold">fail to auto-credit</span>.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center pt-4 border-t border-slate-200 dark:border-white/10 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm font-mono text-slate-600 dark:text-slate-400 font-bold flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Clock className="w-4 h-4 text-slate-500"/> {Math.floor(autoPay.time / 60)}:{(autoPay.time % 60).toString().padStart(2, '0')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setAutoPay({active: false, amount: 0, time: 0, checking: false, invoiceId: ''})} className="btn-animate text-xs text-rose-600 dark:text-rose-400 hover:text-rose-700 dark:hover:text-rose-300 font-bold px-4 py-2 bg-rose-100 dark:bg-rose-500/10 rounded-lg transition-colors border border-rose-200 dark:border-rose-500/20">Cancel</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="space-y-6 sm:space-y-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-start mb-5 pb-4 border-b border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Building className="w-6 h-6 text-fuchsia-500 dark:text-fuchsia-400 drop-shadow-[0_0_5px_currentColor]"/> Local Bank Transfer
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-widest mb-1">Exchange Rate</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm font-black text-emerald-600 dark:text-emerald-400">$1 = â‚¦{bankSettings?.nairaRate || 1500}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mb-6 p-4 bg-slate-50 dark:bg-black/20 rounded-xl border border-slate-200 dark:border-white/5 shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Amount to Deposit (USD)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="relative mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DollarSign className="w-4 h-4 text-slate-400 absolute left-3 top-3.5" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" min="1" placeholder="Enter amount..." value={depositAmountUsd} onChange={e => setDepositAmountUsd(e.target.value)} className={uiInput + " !pl-10 !py-2.5"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex items-center justify-between p-3 bg-fuchsia-50 dark:bg-fuchsia-500/10 rounded-lg border border-fuchsia-200 dark:border-fuchsia-500/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs font-bold text-fuchsia-600 dark:text-fuchsia-400">Total to Send (â‚¦):</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-lg font-black text-fuchsia-600 dark:text-fuchsia-400 drop-shadow-sm">â‚¦{depositAmountUsd ? (parseFloat(depositAmountUsd) * (bankSettings?.nairaRate || 1500)).toLocaleString() : '0'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiInnerPanel + " mb-6 text-sm space-y-3"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center border-b border-slate-200 dark:border-white/5 pb-3"><span className="text-slate-600 dark:text-slate-400 font-medium">Bank</span> <span className="font-bold text-slate-900 dark:text-white">Parallex</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center border-b border-slate-200 dark:border-white/5 pb-3 pt-1"><span className="text-slate-600 dark:text-slate-400 font-medium">Name</span> <span className="font-bold text-slate-900 dark:text-white text-right">Samuel Osita Emmanuel</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center pt-1"><span className="text-slate-600 dark:text-slate-400 font-medium">A/C Number</span> <span className="font-mono text-fuchsia-600 dark:text-fuchsia-400 font-black text-lg drop-shadow-sm">1120927346</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => copyToClipboard('1120927346')} className={uiBtnSecondary + " mb-4"}><Copy className="w-4 h-4" /> Copy A/C Number</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 text-center font-semibold uppercase tracking-wider">Requires manual approval. Open a ticket after transfer.</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  {bankSettings?.flutterwaveActive && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 border-emerald-200 dark:border-emerald-500/30"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold mb-2 text-slate-900 dark:text-white flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <CreditCard className="w-6 h-6 text-emerald-500 dark:text-emerald-400 drop-shadow-[0_0_5px_currentColor]"/> Fast Checkout (Card/Bank)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-slate-600 dark:text-slate-400 mb-6 leading-relaxed font-medium">Fund your wallet instantly via Flutterwave. Auto conversion rate: â‚¦{bankSettings?.nairaRate || 1500}/$.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col sm:flex-row gap-4 items-end w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Amount in USD ($)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <DollarSign className="w-5 h-5 text-slate-400 dark:text-slate-500 absolute left-4 top-3.5" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" step="1" min="1" value={depositAmountUsd} onChange={e => setDepositAmountUsd(e.target.value)} placeholder="10" className={uiInput + " pl-12 text-lg font-bold h-12"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={handleFlutterwavePayment} className="btn-animate w-full sm:w-auto bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-400 hover:to-green-500 text-white font-bold px-8 rounded-xl h-12 whitespace-nowrap shadow-[0_4px_15px_rgba(16,185,129,0.4)] border border-emerald-400/50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Pay â‚¦{depositAmountUsd ? (parseFloat(depositAmountUsd) * (bankSettings?.nairaRate || 1500)).toLocaleString() : '0'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-5 flex items-center gap-2 pb-4 border-b border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DollarSign className="w-6 h-6 text-yellow-500 dark:text-yellow-400 drop-shadow-[0_0_5px_currentColor]"/> Binance Pay (Manual)
Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiInnerPanel + " mb-6 text-sm space-y-3"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center border-b border-slate-200 dark:border-white/5 pb-3"><span className="text-slate-600 dark:text-slate-400 font-medium">Name</span> <span className="font-bold text-slate-900 dark:text-white">__CrYpTo-BoT_</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center pt-1"><span className="text-slate-600 dark:text-slate-400 font-medium">Binance ID</span> <span className="font-mono text-yellow-600 dark:text-yellow-400 font-black text-lg drop-shadow-sm">406439321</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => copyToClipboard('406439321')} className={uiBtnSecondary + " mb-3"}><Copy className="w-4 h-4" /> Copy ID</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 text-center font-semibold uppercase tracking-wider">Requires manual approval. Open a ticket.</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // VAULT MODULE
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CustomerDashboardVault({ purchases, reportAccount, copyToClipboard, uiCard, uiBtnPrimary, uiInnerPanel }) {
Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="animate-fade-in-up w-full">
Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 min-h-[500px]"}>
Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl sm:text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3 pb-4 border-b border-slate-200 dark:border-white/5"><Package className="w-6 h-6 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> My Purchased Accounts</h2>
Â  Â  Â  Â  Â  Â  Â  Â  {purchases.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-center py-32 text-slate-500 flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Lock className="w-16 h-16 mb-4 opacity-20" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-base font-medium">You haven't purchased any accounts yet.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {purchases.map((acc, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const [totpCode, setTotpCode] = useState('');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const [timeLeft, setTimeLeft] = useState(30);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const [twoFaSecret, setTwoFaSecret] = useState(null);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const rawData = String(acc.data || '');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const match = rawData.match(/ðŸ” 2FA INFO:\s*\n?([a-zA-Z0-9\s]+)/i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (match) setTwoFaSecret(match[1].replace(/\s+/g, '').toUpperCase());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }, [acc.data]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â useEffect(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (!twoFaSecret) return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const updateTotp = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (typeof window.OTPAuth !== 'undefined') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â let totp = new window.OTPAuth.TOTP({ algorithm: 'SHA1', digits: 6, period: 30, secret: window.OTPAuth.Secret.fromBase32(twoFaSecret) });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setTotpCode(totp.generate());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â setTimeLeft(30 - (Math.floor(Date.now() / 1000) % 30));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â } catch(e) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â updateTotp();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const interval = setInterval(updateTotp, 1000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return () => clearInterval(interval);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }, [twoFaSecret]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div key={idx} className={uiInnerPanel + " flex flex-col w-full relative group"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex justify-between items-start mb-3 sm:mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-xs sm:text-sm font-bold text-slate-800 dark:text-white flex items-center gap-1.5 sm:gap-2 break-words max-w-[70%]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Package className="w-4 h-4 text-violet-500 dark:text-violet-400 shrink-0 drop-shadow-[0_0_5px_currentColor]"/> {acc.type}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-[10px] text-slate-500 dark:text-slate-400 font-semibold px-2 py-1 bg-slate-200 dark:bg-black/30 rounded-md shrink-0 border border-slate-300 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {acc.date ? new Date(acc.date).toLocaleDateString() : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {twoFaSecret && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="mb-4 bg-violet-50 dark:bg-violet-900/10 border border-violet-200 dark:border-violet-500/20 p-4 rounded-xl flex flex-col items-center justify-center relative overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="absolute top-0 left-0 w-full h-1 bg-slate-300 dark:bg-slate-800">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="bg-violet-500 dark:bg-violet-400 h-full transition-all duration-1000 ease-linear shadow-[0_0_10px_currentColor]" style={{width: `${(timeLeft/30)*100}%`}}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-[10px] sm:text-xs text-violet-600 dark:text-violet-300 font-semibold mb-1 mt-1 uppercase tracking-widest">Live Authenticator Code</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="text-3xl sm:text-4xl font-black text-slate-900 dark:text-white tracking-widest font-mono drop-shadow-md">{totpCode || '------'}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-[10px] text-slate-500 mt-2 font-medium">Valid for {timeLeft} seconds</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â )}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="w-full bg-white dark:bg-black/40 border border-slate-200 dark:border-white/5 p-3 sm:p-4 rounded-xl mb-4 sm:mb-5 overflow-x-auto shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <pre className="font-mono text-xs sm:text-sm text-emerald-600 dark:text-emerald-400 whitespace-pre-wrap break-words font-semibold">{String(acc.data || '')}</pre>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex justify-end gap-3 mt-auto items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const id = 'REP-' + Date.now();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Tickets', id), { email: purchases[0].customer, subject: `Reported Account`, message: `Issue reported.`, status: 'Open', date: new Date().toISOString() });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast('Report forwarded to admin.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }} className="btn-animate text-[11px] text-slate-500 dark:text-slate-400 hover:text-rose-500 dark:hover:text-rose-400 font-semibold px-3 py-2 transition-colors">Report Issue</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (navigator.clipboard) navigator.clipboard.writeText(String(acc.data || '')).then(() => triggerToast("Copied!"));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { const t = document.createElement("textarea"); t.value = String(acc.data || ''); document.body.appendChild(t); t.select(); document.execCommand("copy"); document.body.removeChild(t); triggerToast("Copied!"); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }} className={uiBtnPrimary + " !w-auto !py-2 !px-4 !text-xs !rounded-lg"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Copy className="w-3.5 h-3.5 drop-shadow-sm"/> Copy Data
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // PROFILE MODULE
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CustomerDashboardProfile({ user, balance, tier, userInfo, allOrders, deposits, purchases, tickets, db, appId, featureSettings, triggerToast, uiCard, uiInput, uiBtnPrimary, uiBtnSecondary, uiInnerPanel }) {
Â  Â  Â  Â  Â  const [profileSubTab, setProfileSubTab] = useState('overview');
Â  Â  Â  Â  Â  const [ticketSubject, setTicketSubject] = useState('');
Â  Â  Â  Â  Â  const [ticketMessage, setTicketMessage] = useState('');

Â  Â  Â  Â  Â  const claimDailyBonus = async () => {
Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().split('T')[0];
Â  Â  Â  Â  Â  Â  if (userInfo?.lastBonusDate === today) { triggerToast('Bonus already claimed today.'); return; }
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', user.email), { balance: (userInfo?.balance || 0) + 0.50, lastBonusDate: today });
Â  Â  Â  Â  Â  Â  Â  triggerToast('$0.50 daily reward credited.');
Â  Â  Â  Â  Â  Â  } catch(err) {}
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const submitTicket = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault(); if (!ticketSubject.trim() || !ticketMessage.trim()) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Tickets', 'TCK-' + Date.now()), { email: user.email, subject: ticketSubject, message: ticketMessage, status: 'Open', date: new Date().toISOString() });
Â  Â  Â  Â  Â  Â  Â  setTicketSubject(''); setTicketMessage(''); triggerToast('Support ticket created.');
Â  Â  Â  Â  Â  Â  } catch(err) {}
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const referralCode = `REF-${(user?.email || '').split('@')[0].toUpperCase()}`;
Â  Â  Â  Â  Â  const unifiedHistory = [
Â  Â  Â  Â  Â  Â  Â  ...deposits.map(d => ({ id: d.id, type: 'Deposit', amount: d.amount, date: d.date, status: d.status, method: d.method })),
Â  Â  Â  Â  Â  Â  Â  ...allOrders.map(o => ({ id: o.id, type: 'Market Purchase', amount: o.total, date: o.date, status: o.status, method: 'Store Balance' })),
Â  Â  Â  Â  Â  Â  Â  ...purchases.filter(p => String(p.type).includes('Live SMS')).map(p => ({ id: p.id, type: p.type, amount: 0, date: p.date, status: 'Completed', method: 'Store Balance' }))
Â  Â  Â  Â  Â  ].sort((a,b) => new Date(b.date) - new Date(a.date));

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="animate-fade-in-up w-full">
Â  Â  Â  Â  Â  Â  Â  <div className="flex space-x-2 mb-6 p-1.5 bg-slate-200/50 dark:bg-white/[0.05] rounded-xl w-max mx-auto md:mx-0 shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setProfileSubTab('overview')} className={`px-4 py-2 rounded-lg text-sm font-bold transition-all ${profileSubTab === 'overview' ? 'bg-white dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm' : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white'}`}>Overview</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setProfileSubTab('history')} className={`px-4 py-2 rounded-lg text-sm font-bold transition-all ${profileSubTab === 'history' ? 'bg-white dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm' : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white'}`}>History</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setProfileSubTab('support')} className={`px-4 py-2 rounded-lg text-sm font-bold transition-all ${profileSubTab === 'support' ? 'bg-white dark:bg-white/10 text-violet-600 dark:text-violet-400 shadow-sm' : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white'}`}>Support Tickets</button>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  {profileSubTab === 'overview' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 xl:grid-cols-3 gap-6 sm:gap-8 w-full animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-8 text-center xl:col-span-1 h-fit flex flex-col items-center"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-24 h-24 bg-violet-50 dark:bg-violet-500/10 rounded-[2rem] flex items-center justify-center mb-5 border border-violet-200 dark:border-violet-500/30 shadow-[inset_0_0_15px_rgba(245,158,11,0.2)]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <UserIcon className="w-10 h-10 text-violet-600 dark:text-violet-400 drop-shadow-[0_0_8px_currentColor]" strokeWidth={2.5}/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-lg font-bold text-slate-900 dark:text-white mb-1 w-full truncate" title={user.email}>{user.email}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-slate-500 dark:text-slate-400 font-semibold mb-8">Joined {userInfo?.joined ? new Date(userInfo.joined).toLocaleDateString() : 'N/A'}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full text-left mb-2 flex justify-between items-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Level</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className={`text-sm font-black ${tier?.color || 'text-slate-400'} flex items-center gap-1 drop-shadow-sm`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {tier && tier.icon && <tier.icon className="w-3.5 h-3.5"/>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {tier?.name || 'Loading'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {tier && tier.next && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full bg-slate-200 dark:bg-slate-800 rounded-full h-2 mb-2 overflow-hidden shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-gradient-to-r from-violet-500 to-cyan-600 h-full rounded-full shadow-[0_0_10px_rgba(245,158,11,0.8)]" style={{width: `${Math.min(100, ((userInfo?.totalSpent || 0) / tier.next) * 100)}%`}}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {tier && tier.next ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-600 dark:text-slate-500 font-medium w-full text-left mb-6">Spend ${Number(tier.next - (userInfo?.totalSpent || 0)).toFixed(2)} more to level up.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-emerald-600 dark:text-emerald-400 font-bold w-full text-center mb-6 uppercase tracking-widest drop-shadow-sm">Max Level Achieved!</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="xl:col-span-2 space-y-6 sm:space-y-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-2 gap-4 sm:gap-6 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 flex flex-col justify-center items-center text-center"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 text-[10px] sm:text-xs font-bold mb-2 uppercase tracking-widest">Lifetime Spent</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-3xl sm:text-4xl font-black text-slate-900 dark:text-white drop-shadow-sm">${Number(userInfo?.totalSpent || 0).toFixed(2)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 flex flex-col justify-center items-center text-center border-emerald-200 dark:border-emerald-500/30 bg-emerald-50 dark:bg-emerald-500/10 shadow-[inset_0_0_20px_rgba(16,185,129,0.1)]"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-emerald-700 dark:text-emerald-400/80 text-[10px] sm:text-xs font-bold mb-2 uppercase tracking-widest">Current Balance</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-3xl sm:text-4xl font-black text-emerald-600 dark:text-emerald-400 drop-shadow-[0_0_8px_currentColor]">${Number(balance || 0).toFixed(2)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {featureSettings?.dailyReward && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-5 border-violet-200 dark:border-violet-500/30 bg-violet-50 dark:bg-violet-500/10 shadow-[inset_0_0_20px_rgba(245,158,11,0.1)]"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-base font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-1.5"><Star className="w-5 h-5 text-yellow-500 dark:text-yellow-400 drop-shadow-[0_0_5px_currentColor]"/> Daily Reward</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-sm text-slate-700 dark:text-slate-300 font-medium">Claim your free <span className="font-bold text-violet-600 dark:text-violet-400">$0.50</span> wallet bonus every 24 hours.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={claimDailyBonus} className="btn-animate bg-gradient-to-r from-violet-500 to-cyan-600 hover:from-violet-400 hover:to-cyan-500 border border-violet-400/50 text-white px-6 py-3 rounded-xl text-sm font-bold transition-all w-full sm:w-auto shadow-[0_4px_15px_rgba(245,158,11,0.4)]">Claim Bonus</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {featureSettings?.referral && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-sm sm:text-base font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2"><Users className="w-5 h-5 text-fuchsia-500 dark:text-fuchsia-400 drop-shadow-[0_0_5px_currentColor]"/> Affiliate Program</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-xs sm:text-sm text-slate-600 dark:text-slate-400 font-medium mb-5">Share your unique code with friends to earn deposit bonuses.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className={uiInnerPanel + " !p-3 flex justify-between items-center bg-slate-100 dark:bg-black/40 shadow-inner"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="font-mono text-sm sm:text-base font-black text-fuchsia-600 dark:text-fuchsia-400 px-3 break-all tracking-wider">{referralCode}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (navigator.clipboard) navigator.clipboard.writeText(referralCode).then(() => triggerToast("Copied!"));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { const t = document.createElement("textarea"); t.value = referralCode; document.body.appendChild(t); t.select(); document.execCommand("copy"); document.body.removeChild(t); triggerToast("Copied!"); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }} className={uiBtnSecondary + " !w-auto !py-2.5 !px-3"}><Copy className="w-4 h-4"/></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  {profileSubTab === 'history' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 min-h-[500px] animate-fade-in-up"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl sm:text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3 pb-4 border-b border-slate-200 dark:border-white/5"><History className="w-6 h-6 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Transaction Ledger</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {unifiedHistory.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-center py-32 text-slate-500 flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Activity className="w-16 h-16 mb-4 opacity-20" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-base font-medium">No transactions found.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {unifiedHistory.map((item, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isDeposit = item.type === 'Deposit';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={idx} className={uiInnerPanel + " !p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={`w-12 h-12 rounded-xl flex items-center justify-center border shrink-0 shadow-inner ${isDeposit ? 'bg-emerald-50 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/30 text-emerald-600 dark:text-emerald-400' : 'bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/30 text-rose-600 dark:text-rose-400'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isDeposit ? <Wallet className="w-6 h-6 drop-shadow-[0_0_5px_currentColor]"/> : <ShoppingCart className="w-6 h-6 drop-shadow-[0_0_5px_currentColor]"/>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-base font-bold text-slate-900 dark:text-white">{item.type}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 font-mono mt-1 font-medium">{item.id}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-600 dark:text-slate-500 font-semibold mt-1">{item.date ? new Date(item.date).toLocaleString() : ''}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex sm:flex-col items-center sm:items-end justify-between w-full sm:w-auto mt-2 sm:mt-0 pt-3 sm:pt-0 border-t border-slate-200 dark:border-white/5 sm:border-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className={`text-xl font-black ${isDeposit ? 'text-emerald-600 dark:text-emerald-400' : 'text-slate-900 dark:text-white'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isDeposit ? '+' : '-'}${Number(item.amount || 0).toFixed(2)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className={`text-[9px] sm:text-[10px] font-bold mt-1 px-2.5 py-1 rounded-md uppercase tracking-wider border shadow-sm ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String(item.status || '').includes('Completed') || String(item.status || '').includes('Approved') ? 'bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String(item.status || '').includes('Pending') || String(item.status || '').includes('Awaiting') ? 'bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 border-violet-200 dark:border-violet-500/30' :Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 border-rose-200 dark:border-rose-500/30'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {item.status}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  {profileSubTab === 'support' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 w-full animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-6 sm:space-y-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 h-fit"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2 pb-4 border-b border-slate-200 dark:border-white/5"><Headset className="w-6 h-6 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Open a Ticket</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-slate-600 dark:text-slate-400 font-medium mb-6 mt-4">Experiencing issues? Describe it below and our team will assist you shortly.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={submitTicket} className="space-y-5 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Subject</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" value={ticketSubject} onChange={e => setTicketSubject(e.target.value)} required placeholder="Brief issue title" className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Details</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea value={ticketMessage} onChange={e => setTicketMessage(e.target.value)} required placeholder="Provide full context..." rows="4" className={uiInput + " resize-none"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" className={uiBtnPrimary}>Submit Request</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 h-fit w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h2 className="text-base sm:text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2"><HelpCircle className="w-5 h-5 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Quick FAQ</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiInnerPanel}><p className="font-bold text-slate-900 dark:text-white text-sm mb-1.5 leading-snug">How long does Auto Deposit take?</p><p className="text-[11px] sm:text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium">USDT TRC20 and BTC deposits are usually credited within 1-5 minutes after blockchain confirmation.</p></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiInnerPanel}><p className="font-bold text-slate-900 dark:text-white text-sm mb-1.5 leading-snug">What if the account I bought is invalid?</p><p className="text-[11px] sm:text-xs text-slate-600 dark:text-slate-400 leading-relaxed font-medium">Please click 'Report Issue' in the Vault tab. Our team will verify and provide a replacement.</p></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 flex flex-col w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-5 pb-4 border-b border-slate-200 dark:border-white/5">Active Tickets</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="space-y-4 overflow-y-auto scrollbar-hide pr-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {tickets.length === 0 ? <p className="text-center text-slate-500 font-medium py-20 text-sm">You have no active support tickets.</p> : tickets.map(t => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div key={t.id} className={uiInnerPanel + " w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex justify-between items-start mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h4 className="font-bold text-slate-900 dark:text-white text-sm sm:text-base break-words w-[70%]">{t.subject}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className={`text-[10px] px-2.5 py-1 rounded-md font-bold uppercase tracking-wider border shrink-0 shadow-sm ${t.status === 'Open' ? 'bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 border-violet-200 dark:border-violet-500/30' : 'bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30'}`}>{t.status}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="bg-slate-100 dark:bg-black/30 p-3 rounded-xl border border-slate-200 dark:border-white/5 mb-3 w-full shadow-inner">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-sm text-slate-700 dark:text-slate-300 font-medium leading-relaxed break-words">{t.message}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-[10px] text-slate-500 font-bold flex items-center gap-1.5"><Clock className="w-3 h-3"/> {t.date ? new Date(t.date).toLocaleString() : ''}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // CART MODAL
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function CartModal({ cart, setCart, setShowCart, balance, user, promoSettings, triggerToast, addNotification, db, appId, uiCard, uiBtnPrimary, uiInnerPanel }) {
Â  Â  Â  Â  Â  Â  const [isCheckingOut, setIsCheckingOut] = useState(false);
Â  Â  Â  Â  Â  Â  const totalAmount = cart.reduce((sum, item) => sum + item.price, 0);
Â  Â  Â  Â  Â  Â  const discountAmount = promoSettings?.isActive ? (totalAmount * (promoSettings.discount / 100)) : 0;
Â  Â  Â  Â  Â  Â  const finalAmount = totalAmount - discountAmount;

Â  Â  Â  Â  Â  Â  const handleCheckout = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (balance < finalAmount) { triggerToast("Insufficient balance. Please deposit funds."); return; }
Â  Â  Â  Â  Â  Â  Â  Â  setIsCheckingOut(true);
Â  Â  Â  Â  Â  Â  Â  Â  let serverWakeTimer = setTimeout(() => { triggerToast("Secure server is waking up... please wait a few seconds."); }, 4000);
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('https://voicestore-backend.onrender.com/api/checkout', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email: user.email, cart: cart })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(serverWakeTimer);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) throw new Error("Network response was not ok");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result.success) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerToast(result.message); addNotification("Purchase Complete", `You bought ${cart.length} item(s).`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setCart([]); setShowCart(false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else triggerToast("Error: " + result.message);
Â  Â  Â  Â  Â  Â  Â  Â  } catch(e) { clearTimeout(serverWakeTimer); triggerToast("Checkout failed. Server error or network issue."); }Â 
Â  Â  Â  Â  Â  Â  Â  Â  finally { setIsCheckingOut(false); }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 dark:bg-[#030712]/80 backdrop-blur-sm animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " w-full max-w-md p-6"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between items-center mb-5 pb-4 border-b border-slate-200 dark:border-white/10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2"><ShoppingCart className="w-5 h-5 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Your Cart</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setShowCart(false)} className="p-2 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-full text-slate-600 dark:text-slate-300 transition-colors"><X className="w-4 h-4" /></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {cart.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-center py-10 text-slate-400 flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ShoppingCart className="w-12 h-12 mb-3 opacity-20" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-medium">Your cart is completely empty.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="max-h-60 overflow-y-auto space-y-2 pr-1 scrollbar-hide">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {cart.map((item, idx) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={idx} className={uiInnerPanel + " flex justify-between items-center !p-3"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-semibold text-slate-700 dark:text-slate-200">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {item.name} {item.selectedState && <span className="text-[10px] bg-violet-500/10 border border-violet-500/20 text-violet-600 dark:text-violet-400 px-1.5 py-0.5 rounded ml-1.5">{item.selectedState}</span>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-bold text-violet-500 dark:text-violet-400">${item.price.toFixed(2)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setCart(cart.filter((_, i) => i !== idx))} className="text-rose-500 dark:text-rose-400 hover:text-rose-600 dark:hover:text-rose-300 transition-colors"><Trash2 className="w-4 h-4"/></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="border-t border-slate-200 dark:border-white/10 pt-4 space-y-2.5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between text-sm text-slate-500 dark:text-slate-400 font-medium"><span>Subtotal:</span><span>${totalAmount.toFixed(2)}</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {promoSettings?.isActive && discountAmount > 0 && <div className="flex justify-between text-sm text-emerald-500 dark:text-emerald-400 font-medium"><span>Discount ({promoSettings.discount}%):</span><span>-${discountAmount.toFixed(2)}</span></div>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-between text-xl font-black text-slate-800 dark:text-white pt-2 border-t border-slate-200 dark:border-white/10"><span>Total:</span><span>${finalAmount.toFixed(2)}</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={handleCheckout} disabled={isCheckingOut || balance < finalAmount} className={uiBtnPrimary + " mt-4"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isCheckingOut ? 'Processing Purchase...' : (balance < finalAmount ? 'Insufficient Balance' : 'Complete Purchase')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  // ADMIN DASHBOARD
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  function AdminDashboard({ inventory, orders, deposits, categories, usersDB, db, appId, promoSettings, globalNotice, tickets, featureSettings, bankSettings, smsSettings, auth, user, uiCard, uiInput, uiBtnPrimary, uiBtnSecondary, uiBtnAction, uiInnerPanel, triggerToast, activeTab }) {
Â  Â  Â  Â  Â  const [uploadCategory, setUploadCategory] = useState('new');
Â  Â  Â  Â  Â  const [uploadText, setUploadText] = useState('');
Â  Â  Â  Â  Â  const [customerSearch, setCustomerSearch] = useState('');

Â  Â  Â  Â  Â  const [promoInput, setPromoInput] = useState('');
Â  Â  Â  Â  Â  const [discountInput, setDiscountInput] = useState(0);
Â  Â  Â  Â  Â  const [promoActive, setPromoActive] = useState(false);
Â  Â  Â  Â  Â  const [noticeInput, setNoticeInput] = useState('');
Â  Â  Â  Â  Â  const [nairaRateInput, setNairaRateInput] = useState(1500);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [flutterwaveKeyInput, setFlutterwaveKeyInput] = useState('');
Â  Â  Â  Â  Â  const [flutterwaveActiveInput, setFlutterwaveActiveInput] = useState(false);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [dailyRewardActive, setDailyRewardActive] = useState(false);
Â  Â  Â  Â  Â  const [referralActive, setReferralActive] = useState(false);

Â  Â  Â  Â  Â  const [smsMarkupInput, setSmsMarkupInput] = useState(1.00);
Â  Â  Â  Â  Â  const [smsActiveInput, setSmsActiveInput] = useState(true);

Â  Â  Â  Â  Â  const [editUserModal, setEditUserModal] = useState({ show: false, email: '', password: '', balance: 0, totalSpent: 0 });
Â  Â  Â  Â  Â  const [editProductModal, setEditProductModal] = useState({ show: false, product: null });
Â  Â  Â  Â  Â  const [manageStockModal, setManageStockModal] = useState({ show: false, categoryId: null });

Â  Â  Â  Â  Â  const handleSaveProduct = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const updatedCategories = categories.map(cat => cat.id === editProductModal.product.id ? editProductModal.product : cat);
Â  Â  Â  Â  Â  Â  const safeDataToSave = updatedCategories.map(cat => ({ id: cat.id, name: cat.name, description: cat.description, price: Number(cat.price), color: cat.color || '' }));
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Products'), { list: safeDataToSave });
Â  Â  Â  Â  Â  Â  Â  triggerToast('Product updated successfully.');
Â  Â  Â  Â  Â  Â  Â  setEditProductModal({ show: false, product: null });
Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast('Failed to update product.'); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleDeleteAccount = async (categoryId, accountIndex) => {
Â  Â  Â  Â  Â  Â  if (!window.confirm("Are you sure you want to delete this specific account?")) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  const newInv = { ...inventory };
Â  Â  Â  Â  Â  Â  Â  newInv[categoryId].splice(accountIndex, 1);
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Inventory', 'Stock'), newInv);
Â  Â  Â  Â  Â  Â  Â  triggerToast('Account deleted successfully.');
Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast('Failed to delete account.'); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  if (promoSettings) { setPromoInput(promoSettings.code || ''); setDiscountInput(promoSettings.discount || 0); setPromoActive(promoSettings.isActive || false); }
Â  Â  Â  Â  Â  Â  if (globalNotice) setNoticeInput(globalNotice);
Â  Â  Â  Â  Â  Â  if (featureSettings) { setDailyRewardActive(featureSettings.dailyReward || false); setReferralActive(featureSettings.referral || false); }
Â  Â  Â  Â  Â  Â  if (bankSettings) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  setNairaRateInput(bankSettings.nairaRate || 1500);Â 
Â  Â  Â  Â  Â  Â  Â  Â  setFlutterwaveKeyInput(bankSettings.flutterwaveKey || '');
Â  Â  Â  Â  Â  Â  Â  Â  setFlutterwaveActiveInput(bankSettings.flutterwaveActive || false);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (smsSettings) {
Â  Â  Â  Â  Â  Â  Â  Â  setSmsMarkupInput(smsSettings.markup !== undefined ? smsSettings.markup : 1.00);
Â  Â  Â  Â  Â  Â  Â  Â  setSmsActiveInput(smsSettings.active ?? true);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }, [promoSettings, globalNotice, featureSettings, bankSettings, smsSettings]);

Â  Â  Â  Â  Â  const pendingDeposits = deposits.filter(d => d.status === 'Pending' || d.status === 'Verifying...' || d.status === 'Pending Review' || d.status === 'Awaiting Payment');
Â  Â  Â  Â  Â  const pendingTickets = (tickets || []).filter(t => t.status === 'Open');
Â  Â  Â  Â  Â  const totalSales = orders.filter(o => o.status === 'Completed').reduce((sum, order) => sum + Number(order.total || 0), 0);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const filteredUsers = Object.keys(usersDB).filter(email => email.toLowerCase().includes(customerSearch.toLowerCase()));

Â  Â  Â  Â  Â  const handleUploadAccounts = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  if (!uploadText.trim()) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const rawText = uploadText.trim();
Â  Â  Â  Â  Â  Â  let validAccounts = [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (uploadCategory === 'textplus' || rawText.includes('Email\n') || rawText.includes('Email\r\n')) {
Â  Â  Â  Â  Â  Â  Â  Â  const blocks = rawText.split(/(?=^Email\s*\n)/gm).filter(b => b.trim().length > 5);
Â  Â  Â  Â  Â  Â  Â  Â  validAccounts = blocks.map(b => b.trim());
Â  Â  Â  Â  Â  Â  } else if (rawText.includes('ðŸ’Œ EMAIL:')) {
Â  Â  Â  Â  Â  Â  Â  Â  const blocks = rawText.split(/(?=ðŸ’Œ EMAIL:)/g).filter(b => b.trim().length > 5);
Â  Â  Â  Â  Â  Â  Â  Â  validAccounts = blocks.map(b => b.trim());
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  validAccounts = rawText.split(/\n\s*\n/).map(a => a.trim()).filter(a => a.length > 5);
Â  Â  Â  Â  Â  Â  Â  Â  if(validAccounts.length === 0) validAccounts = rawText.split(/\n/).map(a => a.trim()).filter(a => a.length > 5);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (validAccounts.length === 0) { triggerToast("No valid format found. Check formatting."); return; }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  const newInv = { ...inventory };
Â  Â  Â  Â  Â  Â  Â  if (!newInv[uploadCategory]) newInv[uploadCategory] = [];
Â  Â  Â  Â  Â  Â  Â  newInv[uploadCategory] = [...newInv[uploadCategory], ...validAccounts];
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Inventory', 'Stock'), newInv);
Â  Â  Â  Â  Â  Â  Â  setUploadText(''); triggerToast(`Added ${validAccounts.length} assets successfully!`);
Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast("Upload failed."); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const submitEditUser = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const email = editUserModal.email;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', email), {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  balance: parseFloat(editUserModal.balance),
Â  Â  Â  Â  Â  Â  Â  Â  Â  totalSpent: parseFloat(editUserModal.totalSpent),
Â  Â  Â  Â  Â  Â  Â  Â  Â  password: editUserModal.password
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  triggerToast('User details updated successfully.');
Â  Â  Â  Â  Â  Â  Â  setEditUserModal({ show: false, email: '', password: '', balance: 0, totalSpent: 0 });
Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast('Failed to update user.'); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const sendResetLinkToUser = async (userEmail) => {
Â  Â  Â  Â  Â  Â  Â  try { await sendPasswordResetEmail(auth, userEmail); triggerToast(`Password reset link sent to ${userEmail}`); }Â 
Â  Â  Â  Â  Â  Â  Â  catch (err) { triggerToast('Failed to send reset link.'); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleManualApprove = async (depId) => {
Â  Â  Â  Â  Â  Â  const dep = deposits.find(d => d.id === depId);
Â  Â  Â  Â  Â  Â  if(!dep) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Deposits', depId), { status: 'Approved' });
Â  Â  Â  Â  Â  Â  Â  const currentBal = Number(usersDB[dep.email]?.balance || 0);
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Users', dep.email), { balance: currentBal + Number(dep.amount || 0) });
Â  Â  Â  Â  Â  Â  Â  triggerToast("Deposit approved.");
Â  Â  Â  Â  Â  Â  } catch (err) { triggerToast("Action failed."); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleResolveTicket = async (ticketId) => {
Â  Â  Â  Â  Â  Â  try { await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Tickets', ticketId), { status: 'Resolved' }); triggerToast('Ticket resolved.'); }Â 
Â  Â  Â  Â  Â  Â  catch(err) { triggerToast('Failed to close ticket.'); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const handleSaveSettings = async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'PromoCode'), { code: String(promoInput).toUpperCase(), discount: parseFloat(discountInput), isActive: promoActive });
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Notice'), { text: noticeInput });
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Features'), { dailyReward: dailyRewardActive, referral: referralActive });
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'SMS'), { markup: parseFloat(smsMarkupInput), active: smsActiveInput });
Â  Â  Â  Â  Â  Â  Â  await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'Store_Settings', 'Bank'), {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  nairaRate: parseFloat(nairaRateInput) || 1500, flutterwaveKey: flutterwaveKeyInput, flutterwaveActive: flutterwaveActiveInput
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  triggerToast("Settings saved.");
Â  Â  Â  Â  Â  Â  } catch (error) { triggerToast("Error saving settings."); }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  {editUserModal.show && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 dark:bg-[#030712]/80 backdrop-blur-sm transition-all duration-300 w-full h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " w-full max-w-md p-6"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex justify-between items-center mb-5 border-b border-slate-200 dark:border-white/10 pb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"><Edit className="w-5 h-5 text-violet-500 dark:text-violet-400"/> Edit Customer</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={() => setEditUserModal({ show: false, email: '', password: '', balance: 0, totalSpent: 0 })} className="p-2 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-full text-slate-600 dark:text-slate-300 transition-colors"><X className="w-4 h-4" /></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p className="text-xs text-slate-700 dark:text-slate-400 font-mono mb-5 font-bold bg-slate-100 dark:bg-black/30 p-3 rounded-lg truncate border border-slate-200 dark:border-white/5 shadow-inner">{editUserModal.email}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <form onSubmit={submitEditUser} className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Saved Password</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" placeholder="User's Password" value={editUserModal.password} onChange={e => setEditUserModal({...editUserModal, password: e.target.value})} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Balance ($)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" step="0.01" required value={editUserModal.balance} onChange={e => setEditUserModal({...editUserModal, balance: e.target.value})} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Total Spent ($)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" step="0.01" required value={editUserModal.totalSpent} onChange={e => setEditUserModal({...editUserModal, totalSpent: e.target.value})} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="pt-5 flex flex-col gap-3 border-t border-slate-200 dark:border-white/5 mt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" className={uiBtnPrimary}>Save Changes</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onClick={() => sendResetLinkToUser(editUserModal.email)} className={uiBtnSecondary + " !bg-rose-50 dark:!bg-rose-500/10 hover:!bg-rose-100 dark:hover:!bg-rose-500/20 text-rose-600 dark:!text-rose-400"}><Mail className="w-4 h-4"/> Send Password Reset Link</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  {/* Main Content Area */}
Â  Â  Â  Â  Â  Â  Â  <div className="flex-grow w-full min-w-0 mt-2 sm:mt-4">
Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'inventory' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8 w-full animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 h-fit lg:col-span-1"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-lg font-bold mb-5 text-slate-900 dark:text-white border-b border-slate-200 dark:border-white/5 pb-4">Add Stock</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={handleUploadAccounts} className="flex flex-col space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Category</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select value={uploadCategory} onChange={(e) => setUploadCategory(e.target.value)} className={uiInput}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {categories.map(cat => <option key={cat.id} value={cat.id} className="bg-slate-100 dark:bg-brand-darkBg text-slate-900 dark:text-white">{cat.name}</option>)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Paste Data</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea value={uploadText} onChange={(e) => setUploadText(e.target.value)} placeholder="Paste accounts here..." className={uiInput + " min-h-[150px] resize-none font-mono text-xs"} required />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" className={uiBtnPrimary}>Upload Assets</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="lg:col-span-2 space-y-6 sm:space-y-8 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-5 sm:p-6 border-b border-slate-200 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02] backdrop-blur-sm"><h2 className="text-base font-bold text-slate-900 dark:text-white">Current Stock</h2></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-full overflow-x-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table className="w-full text-left text-sm whitespace-nowrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead className="bg-slate-100 dark:bg-black/20 backdrop-blur-sm text-slate-600 dark:text-slate-400 font-bold border-b border-slate-200 dark:border-white/5 text-xs uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr><th className="p-4 sm:p-5">Asset Name & Price</th><th className="p-4 sm:p-5 text-center">Quantity</th><th className="p-4 sm:p-5 text-right">Action</th></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody className="divide-y divide-slate-200 dark:divide-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {categories.map(cat => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr key={cat.id} className="hover:bg-slate-50 dark:hover:bg-white/5 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-900 dark:text-slate-200 font-bold">{cat.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-emerald-600 dark:text-emerald-400 font-bold mt-1 drop-shadow-sm">${Number(cat.price).toFixed(2)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-center font-black text-violet-600 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]">{inventory[cat.id] ? inventory[cat.id].length : 0}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setManageStockModal({ show: true, categoryId: cat.id })} className={uiBtnAction}>Manage</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setEditProductModal({ show: true, product: { ...cat } })} className={uiBtnAction + " !bg-violet-50 dark:!bg-violet-500/10 border-violet-200 dark:!border-violet-500/20 text-violet-600 dark:!text-violet-400 hover:bg-violet-100 dark:hover:!bg-violet-500/20"}>Edit Info</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {editProductModal.show && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 dark:bg-brand-darkBg/80 backdrop-blur-sm transition-all duration-300 w-full h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " w-full max-w-md p-6"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-5 border-b border-slate-200 dark:border-white/5 pb-4">Edit Product Details</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <form onSubmit={handleSaveProduct} className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Product Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" required value={editProductModal.product.name} onChange={e => setEditProductModal({ ...editProductModal, product: { ...editProductModal.product, name: e.target.value } })} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Description</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea rows="3" required value={editProductModal.product.description} onChange={e => setEditProductModal({ ...editProductModal, product: { ...editProductModal.product, description: e.target.value } })} className={uiInput + " resize-none text-sm"}></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-[10px] font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider">Price ($)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" required value={editProductModal.product.price} onChange={e => setEditProductModal({ ...editProductModal, product: { ...editProductModal.product, price: parseFloat(e.target.value) } })} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex gap-3 pt-5 border-t border-slate-200 dark:border-white/5 mt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onClick={() => setEditProductModal({ show: false, product: null })} className={uiBtnSecondary}>Cancel</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" className={uiBtnPrimary}>Save Changes</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {manageStockModal.show && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 dark:bg-brand-darkBg/80 backdrop-blur-sm transition-all duration-300 w-full h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " w-full max-w-2xl p-6 flex flex-col max-h-[80vh]"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="flex justify-between items-center mb-5 pb-4 border-b border-slate-200 dark:border-white/5 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2"><Package className="w-5 h-5 text-violet-500 dark:text-violet-400 drop-shadow-[0_0_5px_currentColor]"/> Manage Accounts</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button onClick={() => setManageStockModal({ show: false, categoryId: null })} className="p-2 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-full text-slate-500 dark:text-slate-300 transition-colors"><X className="w-5 h-5" /></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="overflow-y-auto flex-grow pr-2 scrollbar-hide space-y-3 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {(!inventory[manageStockModal.categoryId] || inventory[manageStockModal.categoryId].length === 0) ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-center text-slate-500 dark:text-slate-400 font-medium py-10">No accounts in stock.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inventory[manageStockModal.categoryId].map((acc, index) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={index} className={uiInnerPanel + " flex justify-between items-center w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <pre className="text-xs text-slate-700 dark:text-slate-300 font-mono font-medium truncate max-w-[75%]">{acc}</pre>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => handleDeleteAccount(manageStockModal.categoryId, index)} className="p-2 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-500/20 rounded-lg transition-colors shrink-0 shadow-sm border border-rose-200 dark:border-rose-500/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Trash2 className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'users' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " animate-fade-in-up w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-5 sm:p-6 border-b border-slate-200 dark:border-white/5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-slate-50 dark:bg-white/[0.02] backdrop-blur-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-base font-bold text-slate-900 dark:text-white">Customer Database</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3 w-full sm:w-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="relative flex-grow sm:flex-grow-0 sm:w-64">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <Search className="w-4 h-4 text-slate-400 absolute left-3 top-3" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" placeholder="Search email..." value={customerSearch} onChange={(e)=>setCustomerSearch(e.target.value)} className={uiInput + " !py-2 !pl-9"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs font-bold text-slate-700 dark:text-slate-300 whitespace-nowrap bg-slate-200 dark:bg-black/40 px-3 py-1.5 rounded-lg border border-slate-300 dark:border-white/5">{filteredUsers.length} Users</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="overflow-x-auto w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table className="w-full text-left text-sm whitespace-nowrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead className="bg-slate-100 dark:bg-black/20 backdrop-blur-sm text-slate-600 dark:text-slate-400 font-bold border-b border-slate-200 dark:border-white/5 text-xs uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr><th className="p-4 sm:p-5">Email & Password</th><th className="p-4 sm:p-5">Spent</th><th className="p-4 sm:p-5">Balance</th><th className="p-4 sm:p-5 text-right">Actions</th></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody className="divide-y divide-slate-200 dark:divide-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {filteredUsers.map(email => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr key={email} className="hover:bg-slate-50 dark:hover:bg-white/5 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-900 dark:text-slate-200 font-bold">{String(email)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 mt-1 font-mono">Pass: {usersDB[email].password || 'Hidden/Not Saved'}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 font-semibold text-slate-700 dark:text-slate-300">${Number(usersDB[email].totalSpent || 0).toFixed(2)}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 font-black text-emerald-600 dark:text-emerald-400 drop-shadow-sm">${Number(usersDB[email].balance || 0).toFixed(2)}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => setEditUserModal({ show: true, email: email, password: usersDB[email].password || '', balance: usersDB[email].balance || 0, totalSpent: usersDB[email].totalSpent || 0 })} className={uiBtnAction + " !w-auto !ml-auto !bg-violet-50 dark:!bg-violet-500/10 border-violet-200 dark:!border-violet-500/20 text-violet-600 dark:!text-violet-400 hover:bg-violet-100 dark:hover:!bg-violet-500/20"}><Edit className="w-4 h-4"/> Edit Profile</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {filteredUsers.length === 0 && <p className="text-center py-10 text-slate-500 font-medium">No customers found.</p>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'support' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " animate-fade-in-up w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-5 sm:p-6 border-b border-slate-200 dark:border-white/5 flex items-center justify-between bg-slate-50 dark:bg-white/[0.02] backdrop-blur-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h2 className="text-base font-bold text-slate-900 dark:text-white">Support Tickets</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {pendingTickets.length > 0 && <span className="bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 px-3 py-1 rounded-lg text-xs font-bold border border-violet-200 dark:border-violet-500/20 shadow-[0_0_5px_currentColor]">{pendingTickets.length} Open</span>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="overflow-x-auto w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table className="w-full text-left whitespace-nowrap text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead className="bg-slate-100 dark:bg-black/20 backdrop-blur-sm text-slate-600 dark:text-slate-400 font-bold border-b border-slate-200 dark:border-white/5 text-xs uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr><th className="p-4 sm:p-5">User</th><th className="p-4 sm:p-5">Subject</th><th className="p-4 sm:p-5">Date</th><th className="p-4 sm:p-5 text-right">Action</th></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody className="divide-y divide-slate-200 dark:divide-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {(tickets||[]).map(t => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr key={t.id} className="hover:bg-slate-50 dark:hover:bg-white/5 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-slate-900 dark:text-slate-200 font-bold">{t.email}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-slate-700 dark:text-slate-300">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold block">{t.subject}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-[10px] truncate max-w-[150px] sm:max-w-xs inline-block font-medium text-slate-500 mt-1">{t.message}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-slate-500 dark:text-slate-400 font-semibold text-[10px]">{new Date(t.date).toLocaleDateString()}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {t.status === 'Open' ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => handleResolveTicket(t.id)} className={uiBtnAction + " !w-auto !ml-auto"}>Resolve</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-[10px] text-emerald-600 dark:text-emerald-400 font-bold">Closed</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {(!tickets || tickets.length === 0) && <p className="text-center py-10 text-slate-500 font-medium">Inbox zero.</p>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'analytics' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="animate-fade-in-up w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold mb-6 text-slate-900 dark:text-white drop-shadow-md">Overview</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 sm:grid-cols-3 gap-6 w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 text-[10px] font-bold mb-2 uppercase tracking-widest">Gross Volume</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-3xl sm:text-4xl font-black text-slate-900 dark:text-white drop-shadow-md">${Number(totalSales || 0).toFixed(2)}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 text-[10px] font-bold mb-2 uppercase tracking-widest">Total Customers</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-3xl sm:text-4xl font-black text-slate-900 dark:text-white drop-shadow-md">{Object.keys(usersDB).length}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-500 dark:text-slate-400 text-[10px] font-bold mb-2 uppercase tracking-widest">Completed Orders</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-3xl sm:text-4xl font-black text-slate-900 dark:text-white drop-shadow-md">{orders.length}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'deposits' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " animate-fade-in-up w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-5 sm:p-6 border-b border-slate-200 dark:border-white/5 flex items-center justify-between bg-slate-50 dark:bg-white/[0.02] backdrop-blur-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-base font-bold text-slate-900 dark:text-white">Deposit Ledger</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {pendingDeposits.length > 0 && <span className="bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20 text-violet-600 dark:text-violet-400 px-3 py-1 rounded-lg text-[10px] sm:text-xs font-bold">{pendingDeposits.length} Pending</span>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="overflow-x-auto w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table className="w-full text-left whitespace-nowrap text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead className="bg-slate-100 dark:bg-black/20 backdrop-blur-sm text-slate-600 dark:text-slate-400 font-bold border-b border-slate-200 dark:border-white/5 text-xs uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr><th className="p-4 sm:p-5">Tx Ref / Date</th><th className="p-4 sm:p-5">User / Method</th><th className="p-4 sm:p-5">Amount</th><th className="p-4 sm:p-5 text-right">Status / Action</th></tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody className="divide-y divide-slate-200 dark:divide-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {deposits.map(dep => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isPending = String(dep.status || '').includes('Pending') || String(dep.status || '').includes('Verifying') || String(dep.status || '').includes('Awaiting');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr key={dep.id} className="hover:bg-slate-50 dark:hover:bg-white/5 transition-colors">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-mono text-slate-500 dark:text-slate-400 font-bold text-[10px]">{String(dep.id || '')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-600 dark:text-slate-500 mt-1 font-semibold">{dep.date ? new Date(dep.date).toLocaleString() : ''}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-slate-900 dark:text-slate-200 font-bold">{String(dep.email || '')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-[10px] text-slate-500 dark:text-slate-400 mt-1 font-semibold">{String(dep.method || '')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 font-black text-emerald-600 dark:text-emerald-400 drop-shadow-sm">${Number(dep.amount || 0).toFixed(2)}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td className="p-4 sm:p-5 text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col items-end gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className={`text-[10px] font-bold ${dep.status === 'Approved' ? 'text-emerald-600 dark:text-emerald-400' : isPending ? 'text-violet-600 dark:text-violet-400' : 'text-rose-600 dark:text-rose-400'}`}>{String(dep.status || '')}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {isPending && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => handleManualApprove(dep.id)} className="btn-animate text-[10px] bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-400 hover:to-green-500 text-white px-3 py-1.5 rounded-lg font-bold transition-all flex items-center gap-1.5 shadow-[0_4px_10px_rgba(16,185,129,0.3)]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CheckCircle className="w-3.5 h-3.5"/> Approve
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {deposits.length === 0 && <p className="text-center py-10 text-slate-500 font-medium">No deposits recorded.</p>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  {activeTab === 'settings' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 w-full animate-fade-in-up">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={uiCard + " p-6 sm:p-8 w-full"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-lg font-bold text-slate-900 dark:text-white mb-6 border-b border-slate-200 dark:border-white/5 pb-4">Store Configuration</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={handleSaveSettings} className="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Feature Flags</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className={uiInnerPanel + " flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-white/10"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-sm font-bold text-slate-800 dark:text-slate-200">Daily Login Bonus</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="checkbox" checked={dailyRewardActive} onChange={(e) => setDailyRewardActive(e.target.checked)} className="w-4 h-4 rounded text-violet-500 focus:ring-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className={uiInnerPanel + " flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-white/10"}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-sm font-bold text-slate-800 dark:text-slate-200">Affiliate Program</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="checkbox" checked={referralActive} onChange={(e) => setReferralActive(e.target.checked)} className="w-4 h-4 rounded text-violet-500 focus:ring-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 pt-6 border-t border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">API Target Settings</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="grid grid-cols-1 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Markup per SMS ($)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" step="0.01" value={smsMarkupInput} onChange={(e) => setSmsMarkupInput(e.target.value)} placeholder="1.00" className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="flex items-center gap-2.5 cursor-pointer mt-2 pl-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="checkbox" checked={smsActiveInput} onChange={(e) => setSmsActiveInput(e.target.checked)} className="w-4 h-4 rounded text-violet-500 focus:ring-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-sm font-bold text-slate-800 dark:text-slate-200">Enable Live SMS Verification</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 pt-6 border-t border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Promotions</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="grid grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Code</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" value={promoInput} onChange={(e) => setPromoInput(e.target.value)} placeholder="DISCOUNT20" className={uiInput + " uppercase"} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Discount (%)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" min="0" max="100" value={discountInput} onChange={(e) => setDiscountInput(e.target.value)} className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="flex items-center gap-2.5 cursor-pointer mt-2 pl-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="checkbox" checked={promoActive} onChange={(e) => setPromoActive(e.target.checked)} className="w-4 h-4 rounded text-violet-500 focus:ring-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-sm font-bold text-slate-800 dark:text-slate-200">Enable Promo globally</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 pt-6 border-t border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Announcement</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Marquee Bar Text</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" value={noticeInput} onChange={(e) => setNoticeInput(e.target.value)} placeholder="Store wide announcement..." className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 pt-6 border-t border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Bank Transfer (Naira)</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Naira Exchange Rate (1 USD = ? NGN)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="number" value={nairaRateInput} onChange={(e) => setNairaRateInput(e.target.value)} placeholder="1500" className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-4 pt-6 border-t border-slate-200 dark:border-white/5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Flutterwave API (Automated)</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-2">Flutterwave Public Key</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="text" value={flutterwaveKeyInput} onChange={(e) => setFlutterwaveKeyInput(e.target.value)} placeholder="FLWPUBK_TEST-xxxxxxxxx" className={uiInput} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label className="flex items-center gap-2.5 cursor-pointer mt-2 pl-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type="checkbox" checked={flutterwaveActiveInput} onChange={(e) => setFlutterwaveActiveInput(e.target.checked)} className="w-4 h-4 rounded text-violet-500 focus:ring-violet-500" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className="text-sm font-bold text-slate-800 dark:text-slate-200">Enable Flutterwave Deposit for Users</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="pt-4"><button type="submit" className={uiBtnPrimary}>Save Changes</button></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }

Â  Â  Â  Â  const root = createRoot(document.getElementById('root'));
Â  Â  Â  Â  root.render(<App />);
Â  Â  </script>
</body>
Â  Â  </html>
